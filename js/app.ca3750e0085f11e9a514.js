!function(e){function t(t){for(var r,a,s=t[0],u=t[1],c=t[2],d=0,f=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(l&&l(t);f.length;)f.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var u=n[s];0!==o[u]&&(r=!1)}r&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={0:0},i=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="assets/www/";var s=window.skydomJsonp=window.skydomJsonp||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var l=u;i.push([160,2,1]),n()}({10:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.promisify=function(e,t,n){void 0===n&&(n=function(e,t){return function(n){!n||n.error?t(n?n.error:null):e(n)}});e[t+"Async"]=function(){var r=Array.prototype.slice.call(arguments);return new Promise(function(o,i){r.push(n(o,i,e,t,r)),e[t].apply(e,r)})}},t.load_script=function(e,t){if(!(e in o)||t&&o[e].failed){var n={promise:null,failed:!1};n.promise=new Promise(function(t,r){var o=document.createElement("script");o.onload=function(){t(!0)},o.addEventListener("error",function(e){r("loading failed"),e.stopPropagation(),e.preventDefault()}),o.type="text/javascript",o.src=e,n.dom=o,document.getElementsByTagName("head")[0].appendChild(o)}),n.promise.catch(function(e){n.failed=!0,n.dom.parentNode.removeChild(n.dom)}),o[e]=n}return o[e].promise},t.load_text=function(e){return i(e,"text")},t.load_binary=function(e){return i(e,"arraybuffer")},t.base64encode=function(e){for(var t,n="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=new Uint8Array(e),i=o.byteLength,a=i%3,s=i-a,u=0;u<s;u+=3)t=o[u]<<16|o[u+1]<<8|o[u+2],n+=r[(16515072&t)>>18]+r[(258048&t)>>12]+r[(4032&t)>>6]+r[63&t];1==a?(t=o[s],n+=r[(252&t)>>2]+r[(3&t)<<4]+"=="):2==a&&(t=o[s]<<8|o[s+1],n+=r[(64512&t)>>10]+r[(1008&t)>>4]+r[(15&t)<<2]+"=");return n},t.debug_format=function e(t){var n=void 0===t?"undefined":r(t);try{return null===t?"null":void 0===t?"undefined":"string"===n||"boolean"==n||"number"===n?t.toString():t instanceof Array?"["+t.map(e).join(", ")+"]":t instanceof Error?t.toString():JSON.stringify(t)}catch(e){return"<inconvertible "+n+": "+e+">"}};var o={};function i(e,t){return new Promise(function(n,r){var o=new XMLHttpRequest;o.responseType=t,o.withCredentials=!1,o.addEventListener("load",function(e){var t=o.response;n(t)}),o.addEventListener("error",function(e){r(e)}),o.open("GET",e,!0),o.send()})}var a=t.MyPromise={};a.delay=function(e){return new Promise(function(t){setTimeout(function(){t(e)},1e3*e)})},a.with_timeout=function(e,t,n){return Promise.race([e,a.delay(t).then(function(){return n()})])},a.future=function(){var e=null,t=null,n=new Promise(function(n,r){t=function(e){e(n,r)},e&&t(e)});return n.resolve=function(n){e||(e=function(e,t){e(n)},t&&t(e))},n.reject=function(n){e||(e=function(e,t){t(n)},t&&t(e))},n},a.retry=function(e,t){var n=0;return new Promise(function(r,o){r(function r(){return t().catch(function(t){console.error("MyPromise.retry attempt rejected",t);var o=e[n];return n<e.length-1&&n++,"function"==typeof o?o(t,r):a.delay(o).then(r)})}())})}},108:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get_app=I,t.should_show_preroll=function(){try{return localStorage.getItem("matcharena/ya-show-preroll")}catch(e){return!1}},t.initialize=function(e){var t=e.external_api,n=new URLSearchParams(window.location.search).get("ppmethod")||"irpc";"irpc"==n&&a.connect(window,window.parent,A,{});function r(e,t){return"irpc"==n?b?b.invoke(e,t).then(function(t){return console.log(e,"ok"),t},function(n){return console.log(e,t,"err",n),Promise.reject(n)}):Promise.reject("no rpc connection"):u.call(e,t)}(p=async function(){window.ym=window.ym||function(){window.ym.a=window.ym.a||[],window.ym.a.push(arguments)},window.ym.l=+new Date,await i.load_script("https://mc.yandex.ru/metrika/tag.js"),ym(h,"init",{clickmap:!0,trackLinks:!0,accurateTrackBounce:!0,webvisor:!0})}()).then(function(){console.log("Metrika initialized successfully")},function(e){console.error("Failed to initialize metrika:",e)}),I(),"iframe"==n&&r("init").then(E,S);var o=!1;function c(e){o!=e&&(o=e,l.setItem("matcharena/ya-banner",e?"1":"0"),e?(console.log("Showing sticky banner"),r("show_banner").then(function(e){console.log("Showing sticky banner result",e)},function(e){console.warn("Failed to show banner",e)})):(console.log("Hiding sticky banner"),r("hide_banner").then(function(e){console.log("Hiding sticky banner result",e)},function(e){console.warn("Failed to hide banner",e)})))}function P(e){var t={purchaseToken:e.purchaseToken,productID:e.productID};return t}c("1"==l.getItem("matcharena/ya-banner")),window.yandex_safeStorage_get=function(e){return r("safestorage_get",{key:e})},window.yandex_safeStorage_set=function(e,t){return r("safestorage_set",{key:e,value:t})},t.expose({ya_get_products:function(){return r("get_products",{}).then(function(e){var t=[];for(var n in e){var r=e[n],o={productID:r.id,price:r.price,priceCurrencyCode:r.priceCurrencyCode};t.push(o)}return console.log("get_products",t),t})},ya_get_purchases:function(){return r("get_purchases",{}).then(function(e){var t=[];for(var n in e){var r=e[n];t.push(P(r))}return console.log("get_purchases",t),t})},ya_purchase:function(e){return r("purchase",{product_id:e}).then(function(t){return function(t){var n=function(t){for(var n=s.ya_products,r=0;r<n.length;r++){var o=n[r];if(o.offer_id===e)return o}return null}(t.productID);n&&O("inapp_purchase",y*n.price_rub)}(t),P(t)})},ya_consume_purchase:function(e){return r("consume_purchase",{purchase_id:e})},ya_get_player:function(){return r("get_player")},ya_login_player:function(){return r("login_player")},ya_on_new_player:function(){O("new_player",m)},ya_reach_goal:function(e,t){O(e,t)},ya_can_review:function(){return r("can_review").then(function(e){return!!e.value||Promise.reject(e.reason)})},ya_open_review:function(){return r("open_review").then(function(e){return!!e.feedbackSent})},ya_get_reforged_link:function(){return _},ya_ask_install_game:function(){return r("can_show_shortcut_prompt").then(function(e){return e.canShow?r("show_shortcut_prompt").then(function(e){return e.outcome?e.outcome:e.reason?e.reason:"unknown_error"}):"not_allowed"})},ya_set_show_sticky:function(e){c(e)},ya_set_show_preroll:function(e){try{e?localStorage.setItem("matcharena/ya-show-preroll","1"):localStorage.removeItem("matcharena/ya-show-preroll")}catch(e){}},ya_submit_achievement:function(e,t){return function(e,t,n){if(!(t in x))return Promise.reject("no such achievement '"+t+"'");t in C?C[t].pending+=n:C[t]={current:null,pending:n};if(C[t].promise){if(!C[t].pending_promise){var r=i.MyPromise.future();return C[t].pending_promise=r,r}return C[t].pending_promise}var o=async function(){var n=C[t].current;if(null===n&&(n=await e("achievement.getProgress",{id:t}),C[t].current=n),n<x[t].goal){var r=C[t].pending;C[t].pending=0;var o=null;try{await e("achievement.setProgress",{id:t,progress:n+r}),C[t].current=null}catch(e){o=e,C[t].pending+=r}if(o)throw o}return!0};return function e(){var n=o();return C[t].promise=n,n.catch(function(e){console.warn("Failed to submit achievement",t,":",e)}).then(function(){C[t].promise=null;var n=C[t].pending_promise;if(n){C[t].pending_promise=null;var r=new Promise(function(t,n){t(e())});n.resolve(r)}}),n}()}(r,e,t)}}),window.reload_hook=function(){return r("reload")};var N={prepare_ad:async function(){try{return await d,{status:"success"}}catch(e){return{status:"failed-blocked",error:e?e.toString():""+e}}},show_ad:async function(e){await d;var t=null,n=!1,o=!1,i=null,a=void 0;if("rewarded"===e){var s=async function(){a="yarewarded",(n=await r("show_ad",{type:"yarewarded",ad_id:t}))instanceof Object&&(n.rewarded?n=!0:n.opened?(n=!1,o=!0):n=!1)},u=async function(){a="ya:"+t,n=await r("show_ad",{type:"rewarded",ad_id:t})};t=k["rewarded-id"];var c=void 0;c=Math.random()<w?[s,u]:[u,s];for(var l=0;l<c.length;l++){var f=c[l];try{await f()}catch(e){console.warn("Failed to show "+a+" video",e),i=e}if(n||o)break}if(!n&&i)throw i}else a="interstitial",n=await r("show_ad",{type:"interstitial"});return n?("interstitial"===e&&O("watch_inter",v),"rewarded"===e&&O("watch_rewarded",g),{status:"success",source:a}):{status:"failed",source:a,error:"failed to show ad"}}};return{install_sw_promise:f,get_ads_provider:function(){return N},on_loading_finish:function(){r("loading_complete").catch(function(e){console.error("Failed to report loading complete to Yandex sdk",err)})}}};var r=n(11),o=n(12),i=n(10),a=n(77),s=n(35),u=(n(48),n(383)),c=n(60),l=n(49),d=i.MyPromise.future(),f=(document.getElementById("fullscreen-loading"),i.MyPromise.future()),p=i.MyPromise.future(),_=null,h=o.yandex.metrika_counter_id,m=1,v=2,g=4,y=50,w=window.MA_RUNTIME_CONFIG&&window.MA_RUNTIME_CONFIG.rewarded_yandex_rate?window.MA_RUNTIME_CONFIG.rewarded_yandex_rate:o.yandex.rewarded_yandex_rate;var b,k=null;function I(){k||("reforged"==window.MA_CONFIG.skin?(console.log("Selected Yandex application reforged"),k=o.yandex_games.reforged):k=o.yandex_games.main);return k}function E(e){if(e&&e.native_cache?(f.resolve(!1),console.log("parent yandex told us not to use sw")):(f.resolve(!0),console.log("parent yandex allowed us to use sw")),e){var t=null;if(e.env&&e.env.i18n&&e.env.i18n.tld)t=e.env.i18n.tld;else{var n=c.get_locale();t="ru-RU"==n?"ru":"tr-TR"==n?"tr":"com"}_="https://yandex."+t+"/games/app/203211?referrer=utm_source%3DwelcomBonusFromSkydomOriginal"}console.log("parent yandex sdk init completed"),d.resolve(!0)}function S(e){console.error("parent yandex sdk init failed:",e),d.catch(function(e){}),d.reject(e),r.show_reload_modal("yandexsdk")}function A(e,t){switch(e){case"irpc::connected":b=t.connection,console.log("got irpc connection"),b.invoke("init",{}).then(E,S);break;default:console.error("invalid rpc method '"+e+"'")}}function O(e,t){(async function(e,t){await p,ym(h,"reachGoal",e,{order_price:t})})(e,t).then(function(){console.log("Posted metrika goal "+e)},function(e){console.warn("Unable to post metrika goal:",e)})}var x={test3:{goal:3},wins100:{goal:100},bonus10k:{goal:1e4},omni500:{goal:500}},C={}},11:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.show_shadow_overlay=function(e){var t=document.getElementById("shadow-overlay");t.style.display=e?"block":"none";window.set_global_mute(e)},t.close_modal_dialog=c,t.show_modal_popup=d,t.reload_page=_,t.show_reload_modal=m,t.initialize_ui=function(e){e.expose({reload:m,show_sandbox_popup:function(e){f(e)}})};var r=n(60),o=n(146),i=n(10),a=n(48),s=!1;function u(e){var t=document.getElementById("modal-shadow-overlay");t.style.display=e?"block":"none"}function c(){s&&(s=!1,document.getElementById("modal-popup").style.display="none",document.getElementById("demo-popup").style.display="none",u(!1))}var l=/#([a-zA-Z0-9_]+)/g;function d(e,t,n,o){return new Promise(function(a,d){if(!s){var f={};s=f;var p=document.getElementById("modal-popup");u(!0);var _=document.getElementById("modal-popup-button");if("string"==typeof e)r.get_texts(["modal."+e+".title","modal."+e+".text","modal."+e+".button"]).then(function(e){s==f&&(document.getElementById("modal-popup-header").innerHTML=e[0],document.getElementById("modal-popup-text").innerHTML=e[1],document.getElementById("modal-popup-button").innerHTML=e[2],p.style.display="block")});else{var h=function(t,n){var o=e[n],i=void 0;null==o?o="@missing:"+n:"string"==typeof o?i={}:(i=o,o=o.id);var a=document.getElementById(t);"@"==o[0]?a.innerHTML=o.substr(1):r.get_texts([o]).then(function(e){s==f&&(a.innerHTML=e[0].replace(l,function(e){return i[e.substr(1)]}))})};Promise.all([h("modal-popup-header","header"),h("modal-popup-text","text"),h("modal-popup-button","button")]).then(function(){p.style.display="block"})}console.log("Pre delay"),i.MyPromise.delay(.25).then(function(){s==f&&(p.style.display="block")}),console.log("after delay"),p.className=t?"modal "+t:"modal",console.log("after func"),_.addEventListener("click",g),p.addEventListener("click",y)}function m(){_.removeEventListener("click",g),p.removeEventListener("click",y)}function v(){m(),c(),a(!0)}function g(){console.log("BUtton clicked!"),s==f?o?o()&&v():v():m()}function y(e){e.target==p&&n&&(m(),s==f&&(c(),a(!1)))}})}function f(e){return new Promise(function(t,n){if(!s){var o={};s=o;var a=document.getElementById("demo-popup");u(!0),r.get_texts(["demo."+e+".text"]).then(function(e){s==o&&(document.getElementById("demo-popup-text").innerHTML=e[0],a.style.display="block")}),i.MyPromise.delay(.25).then(function(){s==o&&(a.style.display="block")}),a.addEventListener("click",d)}function l(){a.removeEventListener("click",d)}function d(e){e.target==a&&(l(),s==o&&(c(),t(!1)))}})}function p(){var e="ma_referrer="+encodeURIComponent(MA_CONFIG.referrer),t=window.location;t.search.indexOf("ma_referrer=")>=0?t.reload():t.search.length>0?t.search+="&"+e:t.search+=e}function _(){try{if(window.reload_hook)window.reload_hook().catch(function(e){console.error("Failed to reload: ",e),p()});else if(MA_CONFIG.requires_POST){var e=document.createElement("form");for(var t in e.setAttribute("method","POST"),MA_CONFIG.post_data){var n=document.createElement("input");n.setAttribute("type","hidden"),n.setAttribute("name",t),n.setAttribute("value",MA_CONFIG.post_data[t]),e.appendChild(n)}MA_CONFIG.referrer&&((n=document.createElement("input")).setAttribute("type","hidden"),n.setAttribute("name","ma_referrer"),n.setAttribute("value",MA_CONFIG.referrer),e.appendChild(n)),e.setAttribute("action",window.location.href),document.body.appendChild(e),e.submit()}else p()}catch(e){}}t.show_sandbox_popup=f;var h=!1;function m(e,t){if(h)return!1;t=t||e,h=!0,a.send("Error.ModalReload",{reason:t}),d(e,void 0,void 0,function(){if("gpu_software"==e)window.open(o.gpu_software,"_blank");else if("gpu_error"==e)window.open(o.gpu_error,"_blank");else if("wasm"==e)window.open(o.wasm,"_blank");else if("webgl"==e)window.open(o.webgl,"_blank");else{if("oom"!=e)return _(),!0;window.open(o.oom,"_blank")}})}},146:function(e,t,n){"use strict";e.exports={fp_install:"https://matcharenabeta.freshdesk.com/support/solutions/articles/36000057743-what-to-do-if-i-don-t-have-flash-player-",fp_upgrade:"https://matcharenabeta.freshdesk.com/support/solutions/articles/36000057744-what-to-do-if-i-have-an-older-version-of-flash-player-",gpu_software:"https://matcharenabeta.freshdesk.com/support/solutions/articles/36000057755-how-to-enable-gpu-acceleration-in-your-browser-",gpu_error:"https://matcharenabeta.freshdesk.com/support/solutions/articles/36000057755-how-to-enable-gpu-acceleration-in-your-browser-",wasm:"https://matcharenabeta.freshdesk.com/support/solutions/articles/36000110023-what-to-do-when-i-see-your-browser-does-not-seem-to-support-webassembly-",webgl:"https://matcharenabeta.freshdesk.com/support/solutions/articles/36000109624-how-to-enable-webgl-in-your-browser-",oom:"https://matcharenabeta.freshdesk.com/support/solutions/articles/36000113431-what-to-do-when-i-see-not-enough-memory-"}},149:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.initialize=function(e){if(!(g=e["api-key"]))return;i=!!localStorage.getItem("analytics-debug"),async function(){try{var e=await fetch("posthog-config.json");if(!e.ok)throw new Error("Response status: "+e.status);var t=await e.json();y("Got posthog config",t),l={};var n=!0,r=!1,o=void 0;try{for(var i,s=t.events[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var u=i.value;l[u]=!0}}catch(e){r=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}c=[];var d=!0,f=!1,p=void 0;try{for(var _,h=t.filters[Symbol.iterator]();!(d=(_=h.next()).done);d=!0){var m=_.value;c.push(m)}}catch(e){f=!0,p=e}finally{try{!d&&h.return&&h.return()}finally{if(f)throw p}}a=!0,N()}catch(e){console.error("Failed to fetch PostHog config",e)}}().then(function(){y("PostHog config initialized")},function(e){console.error("Failed to initialize PostHog config",e)})},t.reset_user=function(e){if(!g)return;if(d&&d!==e)try{u&&o.default.reset()}catch(e){console.error("Failed to logout PostHog",err)}d=e,f={},h=null,p=!0,_=!1,m=!0,k()},t.update_user_params=function(e){if(!g)return;try{for(var t in e)f[t]!==e[t]&&(f[t]=e[t],h||(h={}),h[t]=e[t]);p=!0,P<=0&&(P=setTimeout(function(){P=0,N()},0))}catch(e){console.error("Failed to update user params",e)}},t.send_event=function(e,t,n){if(!g)return;if(N(),!1===_)return;if(a&&!l[t])return;try{var r={type:t,args:n};if(h){var o={};A(h,o),r.userProps=o,h=null}void 0!==_&&u?O(r):(y("Adding pending event",r),v.push(r),v.length>100&&v.splice(0,50))}catch(e){console.error("Failed to send event",e)}};var o=function(e){return e&&e.__esModule?e:{default:e}}(n(378));var i=!1,a=!1,s=!1,u=!1,c=null,l=null,d=null,f={},p=!1,_=!1,h={},m=!1,v=[],g=null;function y(){i&&(arguments[0]="[POSTHOG] "+arguments[0],console.log.apply(console,arguments))}var w=["utm_source","utm_medium","utm_campaign","utm_content","utm_term"];function b(){s||(s=!0,o.default.init(g,{api_host:"https://us.i.posthog.com",autocapture:!1,capture_pageview:!1,capture_pageleave:!1,person_profiles:"identified_only",loaded:function(e){y("PostHog loaded"),u=!0;try{!0===_&&I()}catch(e){console.error("Error in onAPIReady",e)}}}))}function k(){v.length=0}function I(){m&&(!function(){try{var e=new URLSearchParams(window.location.search),t={},n={};n.partner_install=window.MA_CONFIG.partner,t.partner=window.MA_CONFIG.partner,t.sandbox=window.ma_is_sandbox;var r=window.MA_CONFIG.referrer;r&&(t.referrer=r,n.referrer_install=r);var i=window.MA_CONFIG.skin;i&&(t.skin=i,n.skin_install=i);for(var a={},s=!1,u=w.length,c=0;c<u;c++){var l=w[c],p=e.get(l);p&&(a[l]=p,s=!0)}s&&(n.utm_install=a),y("Identifying user",d,"with",t,"and once",n),A(f,t),o.default.identify(d,t,n)}catch(e){console.error("PostHog identification failed",e)}}(),m=!1);var e=v;v=[];var t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;l[s.type]||O(s)}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}}function E(e){if(void 0===e||null===e)return!0;var t=void 0===e?"undefined":r(e);return"boolean"===t||"string"===t||"number"===t}function S(e,t,n){for(var r in e){var o=e[r];E(o)?t[n+r]=o:Array.isArray(o)?t[n+r]=JSON.stringify(o):S(o,t,n+r+".")}}function A(e,t){for(var n in e){var r=e[n];E(r)?t[n]=r:Array.isArray(r)?t[n]=JSON.stringify(r):S(r,t,n+".")}}function O(e){y("Sending event",e);var t={};e.userProps&&(t.$set=e.userProps,A(e.args,t)),o.default.capture(e.type,t)}function x(){!1===(_=function(){if(!a)return;if(!f)return!1;try{var e=!0,t=!1,n=void 0;try{for(var r,o=c[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=r.value;if(C(i))return!0}}catch(e){t=!0,n=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw n}}return y("User fails all filters"),!1}catch(e){return y("Error checking PostHog filters",e),!1}}())?k():!0===_&&(u?I():b())}function C(e){if(y("Checking filter",e),"ab"===e.type){var t=e.test,n=e.groups;if(!Array.isArray(n))return!1;var r="test_"+String(t),o=f[r];if(n.indexOf(o)>=0)return y("User passes filter",e),!0}else{if("and"==e.type){var i=e.filters,a=!0,s=!1,u=void 0;try{for(var c,l=i[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){if(!C(c.value))return!1}}catch(e){s=!0,u=e}finally{try{!a&&l.return&&l.return()}finally{if(s)throw u}}return!0}if("or"==e.type){var d=e.filters,p=!0,_=!1,h=void 0;try{for(var m,v=d[Symbol.iterator]();!(p=(m=v.next()).done);p=!0){if(C(m.value))return!0}}catch(e){_=!0,h=e}finally{try{!p&&v.return&&v.return()}finally{if(_)throw h}}return!1}if("partner"==e.type)return e.partner===window.MA_CONFIG.partner;y("Unknown filter type",e)}return!1}var P=-1;function N(){P>=0&&(clearTimeout(P),P=-1),p&&(p=!1,x())}},150:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.show_ad=y,t.prepare_ad=w,t.on_loading_start=function(){g.on_loading_start&&g.on_loading_start()},t.on_loading_progress=function(e){g.on_loading_progress&&g.on_loading_progress(e)},t.on_loading_finish=function(){g.on_loading_finish&&g.on_loading_finish()},t.happy_time=k,t.get_install_sw_promise=function(){g.install_sw_promise||(g.install_sw_promise=Promise.resolve(!0));return g.install_sw_promise},t.embed=function(e){var n={external_api:e},I=new URLSearchParams(window.location.search);switch(MA_CONFIG.embed){case"gamedistribution":var E=I.get("xdm_c");t.api=g=E?o.initialize(n):r.initialize(n);break;case"poki":t.api=g=i.initialize(n);break;case"yandex":t.api=g=a.initialize(n);break;case"ok":t.api=g=s.initialize(n);break;case"my":t.api=g=u.initialize(n);break;case"crazygames":t.api=g=c.initialize(n);break;case"y8":t.api=g=p.initialize(n);break;case"vk":var S=I.get("platform");console.log("VK platform:",S),f.init(e),d.initialize(),e.expose({vk_show_inapp_not_allowed_popup:function(){m.show_modal_popup("vk_inapp_not_allowed","social",!0).then(function(e){e&&window.open(v.vk_mobile_link,"_blank")})}}),t.api=g=l.initialize(n);break;default:t.api=g=_.initialize(n)}h.initialize(g.get_ads_provider()),e.expose({show_ad:y,prepare_ad:w,set_playing:b,happy_time:k})};var r=n(380),o=n(381),i=n(382),a=n(108),s=n(151),u=n(384),c=(n(79),n(387)),l=n(388),d=n(152),f=n(78),p=n(153),_=n(390),h=n(392),m=n(11),v=n(12),g=t.api=null;function y(e){return h.show_ad(e)}function w(e){return h.prepare_ad(e)}function b(e){g.set_playing&&g.set_playing(e)}function k(e){g.happy_time&&g.happy_time(e)}},151:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get_app=w,t.initialize=function(e){f=e.external_api,s=w(),u=!s||s["test-mode"];var t=new URLSearchParams(window.location.search),n=t.get("logged_user_id"),o=t.get("session_key"),m=t.get("auth_sig");if("true"===t.get("mob")&&"androidweb"===t.get("mob_platform")){var g=function(){FAPI.invokeUIMethod("requestFullscreen")};document.addEventListener("click",g),document.addEventListener("touchend",g)}l={user_id:n,session_key:o,auth_sig:m},async function(){return window.API_callback=function(e,t,n){var r=h[e];r?(delete h[e],"ok"===t?r.resolve(n):r.reject(n)):"showPayment"===e&&f.invoke("ok_update_purchases")},await i.load_script("https://api.ok.ru/js/fapi5.js"),c.resolve(new Promise(function(e,t){FAPI.init(l.api_server,l.apiconnection,function(){console.log("OK init successful"),e(!0)},function(e){console.error("OK init failed!"),t(e||"ok init failed"),r.show_reload_modal("error")})})),await c,d.resolve(_("users.getCurrentUser",{fields:"first_name,pic_3"})),!0}().then(function(){console.log("OK init completed")},function(e){d.reject("no ok authorization"),console.error("OK init failed",e)}),f.expose({ok_get_auth:function(){return l},ok_query_profile:async function(){var e=await d;return{user_id:n,session_key:o,auth_sig:m,name:e.first_name,photo:e.pic_3}},ok_query_friends:async function(){return _("friends.getAppUsers",{}).then(function(e){var t=[];for(var n in e){var r=String(e[n]).split(",");for(var o in r)t.push(r[o])}return console.log("User friends: %s",JSON.stringify(t)),t})},ok_query_products:async function(){return a.ok_products},ok_purchase:async function(e){return await c,await async function(e){var t=function(e){for(var t in a.ok_products){var n=a.ok_products[t];if(n.offer_id===e)return n}return null}(e),n=v("showPayment");if(!n)return Promise.reject("another transaction in progress");return FAPI.UI.showPayment(t.title,t.description,e,u?1:t.price_oks,null,null,"ok",!0),await n}(e)},ok_invite_friends:async function(){await c;var e=v("showInvite");if(!e)return Promise.reject("already inviting");FAPI.UI.showInvite("Попробуй Скайдом! Ооооочень рекомендую! На некоторых уровнях, правда, слишком хитрые головоломки, не все могут пройти...");try{var t=await e;return console.log("Invite results",t),t}catch(e){console.warn("Invite failed!",e)}return null},ok_make_post:async function(e){var t=p[e];if(!t)throw new Error("unknown post id");await c;var n=v("postMediatopic");return FAPI.UI.postMediatopic(t),await n}});var b={prepare_ad:async function(){return{status:"success"}},show_ad:function(e,t){return"interstitial"===e||"preroll"===e?Promise.resolve({status:"failed",source:"ok interstitial",reason:"no ad"}):y(t,"rewarded")}};return{get_ads_provider:function(){return b}}};var r=n(11),o=n(12),i=(n(50),n(10)),a=n(35),s=(n(78),n(48),void 0),u=void 0,c=i.MyPromise.future(),l=null,d=i.MyPromise.future(),f=void 0,p={dc_win:{media:[{type:"text",text:"😃 Ихаааа! Корона Турнира Моя!!! Присоединяйся! 🎮🎯🕹️"},{type:"app",text:"",images:[{url:"https://sun9-19.userapi.com/1pF-jQDMj40bCazaOfgEXpAFp0NdqZqstpu6oA/lnyR7A87xhg.jpg",mark:"dc_win",title:"Попробуй красивейшую Три в Ряд!"}]}]}};async function _(e,t,n){await c;var r={method:e};if(t)for(var o in t)r[o]=t[o];return await new Promise(function(e,t){FAPI.Client.call(r,function(n,r,o){"ok"===n?e(r):t(o)},n)})}var h={},m=null;function v(e){if(h[e])return null;var t=i.MyPromise.future();return h[e]=t,t}async function g(e){await c,await async function(){if(await c,m)return await m;var e=v("prepareMidroll");return FAPI.invokeUIMethod("prepareMidroll"),m=new Promise(function(t){e.then(function(){t(!0)},function(e){t(!1)})}),await m}();var t=v("showMidroll");return t?(m=null,FAPI.invokeUIMethod("showMidroll"),await t.then(function(){return{status:"success",source:"ok_midroll"}},function(e){return{status:"failed",source:"ok_midroll",reason:e}})):Promise.reject("another midroll in progress")}async function y(e,t){var n=null,r=null;try{if((r=await g())&&"success"===r.status)return r}catch(e){n=e}if(n)throw n;return await async function(){return await new Promise(function(t,n){e.on_opened(),setTimeout(function(){t({status:"success",source:"html fake ad"})},1e4)})}()}function w(){s||("reforged"==window.MA_CONFIG.skin?(console.log("Selected OK application reforged"),s=o.ok.reforged):s=o.ok.main);return s}},152:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=function(){i=document.getElementById("vkcustom_timer"),(a=document.getElementById("vkcustom_skip")).innerText="Пропустить рекламу",a.addEventListener("click",function(){if(o){var e=o;o=null,e()}}),s=document.getElementById("vkcustom_fullscreen"),u=document.getElementById("vkcustom_container"),document.getElementById("vkcustom_skip_wrapper"),a.style.display="none"},t.show_yandex_ad=async function(e,t){await function(){d||(d=new Promise(function(e,t){var n="yandexContextAsyncCallbacks";window[n]=window[n]||[],window[n].push(function(){console.log("Yandex ad sdk ready!"),e(!0)});var r=document.createElement("script");r.type="text/javascript",r.src="https://an.yandex.ru/system/context.js",r.async=!0,r.onerror=function(e){t("sdk loading failed")},document.body.appendChild(r)}));return d}();try{return await new Promise(function(n,c){s.style.display="block";var d="yandex_rtb_block_"+l(),f=document.createElement("div");f.setAttribute("id",d),f.classList.add("vkcustom-yandex-block"),u.appendChild(f);var p=!1,_=0;function h(){_&&(clearInterval(_),_=0)}function m(){p||(h(),u.removeChild(f),s.style.display="none",p=!0)}var v=!1;r.MyPromise.delay(7).then(function(){v||(console.log("Ad timed out"),m(),n(!1))}),Ya.Context.AdvManager.render({blockId:e,renderTo:d,async:!0,onRender:function(e){v=!0,console.log("Ad rendered",e),a.style.display="none",t&&t(),function(){i.style.display="block",a.style.display="none",i.innerText="";var e=6;function t(){0===--e?(h(),i.style.display="none",a.style.display="block"):i.innerText="До получения награды: "+e}o=function(){m(),n(!0)},t(),_=setInterval(t,1e3)}()}},function(){v=!0,console.log("Ad not rendered"),m(),n(!1)})})}catch(e){throw cleanup(),e}},t.show_vk_ad=async function(e,t){await function(){f||(f=new Promise(function(e,t){if(window.VK&&VK.Widgets)e(!0);else{var n="vkAsyncInitCallbacks";window[n]=window[n]||[],window[n].push(function(){e(!0)});var r=document.createElement("script");r.type="text/javascript",r.src="https://vk.com/js/api/openapi.js?168",r.async=!0,r.onerror=function(e){t("sdk loading failed")},document.body.appendChild(r)}}).then(function(){return console.log("VK ad sdk ready"),!0}));return f}();try{return await new Promise(function(n,c){s.style.display="block";var d="vk_ad_block_"+l(),f=document.createElement("div");f.setAttribute("id",d),f.classList.add("vkcustom-vk-block"),u.appendChild(f);var p=!1,_=0;function h(){_&&(clearInterval(_),_=0)}function m(){p||(h(),u.removeChild(f),s.style.display="none",p=!0)}var v={};for(var g in e)v[g]=e[g];var y=!1;r.MyPromise.delay(7).then(function(){y||(console.log("Ad timed out"),m(),n(!1))}),VK.Widgets.Ads(d,{onAdsReady:function(e,r){console.log("VK ad callback",e,r),y=!0,e<=0?(console.log("VK Ad not rendered: "+e),m(),n(!1)):(console.log("VK Ad rendered"),a.style.display="none",t&&t(),function(){i.style.display="block",a.style.display="none",i.innerText="";var e=6;function t(){0===--e?(h(),i.style.display="none",a.style.display="block"):i.innerText="До получения награды: "+e}o=function(){m(),n(!0)},t(),_=setInterval(t,1e3)}())}},v)})}catch(e){throw cleanup(),e}};var r=n(10),o=void 0,i=void 0,a=void 0,s=void 0,u=void 0,c=0;function l(){return++c}var d=void 0;var f=void 0},153:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get_app=y,t.initialize=function(e){var t=e.external_api;i.then(function(){!function(){u=!0}()},function(e){console.error("y8 init error: %s",e)});var n=y();async function r(){await _;var e=function(){p&&p.reject("overwritten");return p=o.MyPromise.future()}();console.log("Interstitial break initiated");var t=!1;return m({type:"next",beforeAd:function(){t=!0},afterAd:function(){},adBreakDone:function(n){console.log("Interstitial break completed",n),e.resolve(t)}}),e}window.idAsyncInit=function(){(a=window.ID).Event.subscribe("auth.authResponseChange",function(e){v=e.authResponse&&e.authResponse.details?e.authResponse.details.pid:null,console.log(e)}),a.Event.subscribe("id.init",function(){console.log("Y8 Account SDK initialized!"),a.ads.init(n["app-id"]),i.resolve(!0)}),console.log("Initializing Y8 SDK with app id="+n["app-id"]),a.init({appId:n["app-id"],status:!0})},o.load_script("https://cdn.y8.com/api/sdk.js").catch(function(e){i.reject(e)}),_=function(){var e=new Promise(function(e,t){window.adsbygoogle=window.adsbygoogle||[],m=h=function(e){adsbygoogle.push(e)};var n=document.createElement("script");n.onload=function(){console.log("H5 sdk loaded successfully")},n.addEventListener("error",function(e){t("loading failed"),e.stopPropagation(),e.preventDefault()}),n.type="text/javascript",n.setAttribute("async",""),n.setAttribute("crossorigin","anonymous"),n.setAttribute("data-ad-client",s["ad-client"]),n.setAttribute("data-ad-channel",s["ad-channel"]),n.setAttribute("data-ad-frequency-hint","180s"),s["test-ads"]&&n.setAttribute("data-adbreak-test","on"),n.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",document.getElementsByTagName("head")[0].appendChild(n),h({preloadAdBreaks:"on",sound:"on",onReady:function(){console.log("H5 sdk ready"),e(!0)}})});return e.catch(function(e){console.error("Failed to load H5 sdk:",e)}),e}(),t.expose({y8_get_player:async function(){return await i,new Promise(function(e,t){ID.getLoginStatus(function(n){if(console.log("Y8 Login Status:",n),n.authResponse)try{var r=w(n.authResponse);console.log("Y8 Resonding with:",r),e(r)}catch(e){console.error("Y8 Converison error:",e),t(e)}else t("not logged in")},!1)})},y8_login_player:async function(){return await i,new Promise(function(e,t){ID.login(function(n){null==n?(console.log("Y8 Login failed!"),t("not logged in")):(console.log("Y8 Login result:",JSON.stringify(n)),e(w(n.authResponse)))})})},y8_query_friends:async function(){return await i,v||reject("no auth"),new Promise(function(e,t){ID.api(v+"/friends","GET",{limit:100,offset:0},function(n){if(console.log("Friends api response:",n),n.data){var r=[],o=!0,i=!1,a=void 0;try{for(var s,u=n.data[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var c=s.value;r.push(c.id)}}catch(e){i=!0,a=e}finally{try{!o&&u.return&&u.return()}finally{if(i)throw a}}e(r)}else t("failed to fetch friends")})})}});var f=void 0,b=void 0;function k(){if(f)return f;var e=async function(){await _;var t={};return console.log("Rewarded preload initiated"),await new Promise(function(n,r){var o=!1;m({type:"reward",beforeAd:function(){},afterAd:function(){},beforeReward:function(e){console.log("Rewarded preload completed"),(b=t).show_fn=e,n(!0)},adDismissed:function(){},adViewed:function(){o=!0},adBreakDone:function(r){t.on_done?(console.log("Rewarded completed",r),t.on_done(o,r)):console.log("Rewarded failed to load",r),n(!1),b==t&&(b=null),e==f&&(f=null)}})})}();return(f=e).catch(function(t){e==f&&(f=null,b=null)}),e}var I={prepare_ad:async function(e){try{await i;return"rewarded"==e?await k():await async function(){return await _,console.log("Interstitial preload initiated"),new Promise(function(e,t){h({onReady:function(){console.log("Interstitial preload completed"),e(!0)}})})}(),{status:"success"}}catch(e){return{status:"failed-blocked",error:e?e.toString():""+e}}},show_ad:async function(e,t){await i;try{return l=!0,g(),("rewarded"==e?await async function(){if(await _,console.log("Rewarded show requested"),!await Promise.race([k(),o.MyPromise.delay(5).then(function(){return Promise.resolve(!1)})])||!b)return console.log("Rewarded preload did not succeed"),!1;return await new Promise(function(e,t){var n=b;b=null,f=null,n.on_done=function(t,n){console.log("Rewarded completed with result",t),e(t)},n.show_fn()})}():await r())?{status:"success",source:"y8"}:{status:"failed",error:"y8 ad failed"}}finally{l=!1,g()}}};return{get_ads_provider:function(){return I},on_loading_start:function(){c="start"},on_loading_finish:function(){c="complete"},on_loading_progress:function(e){"complete"!==c&&(c=e)},happy_time:function(e){},set_playing:function(e){d=e,g()}}};n(11);var r=n(12),o=n(10),i=(n(49),n(77),o.MyPromise.future()),a=void 0,s=void 0,u=!1,c=null,l=!1,d=!1,f=!1,p=null,_=null,h=void 0,m=void 0,v=void 0;function g(){if(u){var e=d&&!l;e!=f&&(f=e)}}function y(){s||("reforged"==window.MA_CONFIG.skin?(console.log("Selected Y8 application reforged"),s=r.y8.reforged):s=r.y8.main);return s}function w(e){return{app_id:s["app-id"],user_id:e.details.pid,auth_token:e.access_token,name:e.details.nickname,photo_small:e.details.avatars.thumb_secure_url,photo_medium:e.details.avatars.medium_secure_url,photo_large:e.details.avatars.large_secure_url}}},160:function(e,t,n){n(161),e.exports=n(363)},363:function(e,t,n){"use strict";n(364),n(365);var r=n(366),o=n(397);r(n(398),o)},364:function(e,t,n){},365:function(e,t,n){},366:function(e,t,n){"use strict";n(367),n(368);var r,o,i=n(12),a=n(10),s=n(60),u=n(370),c=n(379),l=n(11),d=n(48),f=(n(149),n(146),n(49)),p=n(150),_=n(79),h=n(108),m=n(154),v=n(395);n(396);var g=!1,y=!1;window.set_global_mute=function(e){y=e},window.get_global_mute=function(){return y},window.preroll_result=null;var w=a.MyPromise.future();async function b(e,t,n){var r=await w;return r?await k(r,e,t,n):await Promise.reject("no ServiceWorker")}function k(e,t,n,r){var o=(r=r||{}).timeout||10;return new Promise(function(r,i){var a=0;function s(){a=setTimeout(function(){i("timeout")},1e3*o)}var u=new MessageChannel;u.port1.onmessage=function(e){a&&clearTimeout(a),"ok"===e.data.status?r(e.data.data):"keepalive"===e.data.status?s():i(e.data.data)},e.postMessage({command:t,data:n},[u.port2]),s()})}function I(){console.log("Attempting to uninstall Service Worker"),"serviceWorker"in navigator?(console.log("Unregistering ServiceWorker..."),navigator.serviceWorker.getRegistrations().then(function(e){e.forEach(function(e){e.unregister().then(function(e){console.log("Successfully unregistered SW")},function(e){console.warn("Failed to unregister a SW",e)})})},function(e){console.warn("Failed to get SW registrations",e)})):console.log("No serviceWorker available"),w.resolve(null)}function E(){window.MA_EXTRA_INFO={},g=!0===sandblaster.detect().sandboxed,function(){var e=new URLSearchParams(window.location.search),t=navigator.userAgent,n=new m.UAParser,r=n.setUA(t).getBrowser().name,o=n.getBrowser().version,i=n.getEngine(),a=n.getDevice(),s=a?a.model:null,u=a?a.type:null,c=a?a.vendor:null,l="mobile"===u||"tablet"===u,d=r&&r.toLowerCase().indexOf("safari")>=0;window.MA_CONFIG.is_mobile=l,window.MA_CONFIG.is_safari=d;var f=n.getOS(),p=f?f.name:null,_=f?f.version:null,h=p&&p.toLowerCase().indexOf("ios")>=0,v=p&&p.toLowerCase().indexOf("ios")>=0&&0==f.version.indexOf("14."),g=d&&o>="14";window.MA_CONFIG.needs_ios_fix=v||g,Math.random()>.5&&"gamedistribution"===MA_CONFIG.embed&&(window.MA_CONFIG.needs_ios_fix=!0),window.MA_CONFIG.use_external_image_loader=h?v:!d||g,window.is_firefox=!!i&&"Gecko"==i.name;var y=window.MA_EXTRA_INFO;y.browser_ua=t,y.browser_name=r,y.browser_version=o,y.browser_engine=i?i.name:null,y.os_name=p,y.os_version=_,y.device_type=u,y.device_model=s,y.device_vendor=c,y.partner=window.MA_CONFIG.partner;var w="default";"43494533"==e.get("pptoken")&&(w="reforged"),MA_CONFIG.skin=w,document.getElementById("wasm-loader-overlay").classList.add("wasm-loader-skin-"+w),document.getElementById("wasm-preloader-overlay").classList.add("fullscreen-overlay-skin-"+w),document.getElementById("preroll-overlay-character").classList.add("fullscreen-overlay-skin-"+w);var b=[],k=navigator.languages;if(k)for(var I in k)b.push(k[I]);var E=navigator.language;if(E&&b.push(E),window.MA_CONFIG.prefered_langs=b,"vk"===MA_CONFIG.embed)window.MA_CONFIG.referrer=e.get("platform");else if("ok"===MA_CONFIG.embed){var S=e.get("mob");window.MA_CONFIG.referrer="true"===S?e.get("mob_platform"):"desktop",window.MA_CONFIG.extra_loading_args={ok_source:e.get("refplace")||"unknown",ok_source_extra:e.get("referer")||""}}else if("my"===MA_CONFIG.embed){var A=e.get("view");window.MA_CONFIG.referrer="app_mobile"===A?e.get("mobile_spec"):"desktop",window.MA_CONFIG.extra_loading_args={my_source:e.get("referer_type")||"unknown",my_source_extra:e.get("referer_id")||""}}else{var O=null,x=new URLSearchParams(window.location.search),C=x.get("ma_referrer");if(C)window.MA_CONFIG.referrer=C;else{var P=x.get("gd_sdk_referrer_url");if(P)O=P;else{var N=x.get("gamedomain");if(N)O=N;else try{O=window.location!==window.parent.location&&document.referrer&&""!==document.referrer?document.referrer:document.location.href}catch(e){}}O&&(O=O.replace(/^(?:(https?|file):\/\/)?(?:\/\/)?(?:www\.)?/i,"").split("/")[0]),window.MA_CONFIG.referrer=O}}console.log("Referrer: ",window.MA_CONFIG.referrer)}(),window.ma_is_sandbox=g,function(){var e=i.analytics;d.initialize(r,e)}(),s.choose_locale(MA_CONFIG.prefered_langs),r.expose({is_sandbox:function(){return g},get_preroll_result:function(){return window.preroll_result},log:function(e,t){"error"==e?console.error(t):"warning"==e?console.warn(t):"info"==e?console.info(t):"debug"==e?console.debug(t):console.log(t)},preload_ready:function(){var e=document.getElementById("preloading_overlay");e.parentNode.removeChild(e)},set_locale:function(e){s.set_locale(e)},swf_ready:function(){},load_local_user:async function(e){if(window.yandex_safeStorage_get)try{var t=JSON.parse(await window.yandex_safeStorage_get(e+"auth_user"));if(t)return console.log("Got user from yandex safe storage",t),t;console.log("No user in yandex safe storage")}catch(e){console.error("Failed to fetch user from yandex safe storage",e)}if(window.MA_CONFIG.is_safari)try{console.log("Asking user from serviceworker");var n=JSON.parse(await b("auth.get_user",e));if(n)return console.log("Got user from serviceworker",n),n}catch(e){console.error("Failed to fetch user from serviceworker",e)}var r=f.getItem("matcharena/"+e+"shared-id");if(r)return JSON.parse(atob(r));if(window.poki_storage_get)try{var o=await window.poki_storage_get("matcharena/shared-id"),i=JSON.parse(atob(o));if(i)return console.log("Got user from poki bounce iframe storage",i),i}catch(e){console.error("Failed to fetch user from poki bounce iframe",e)}return null},store_local_user:async function(e,t){if(e){if(window.yandex_safeStorage_set)try{await window.yandex_safeStorage_set(t+"auth_user",JSON.stringify(e))}catch(e){console.error("Failed to store user in the yandex safeStorage",e)}if(window.MA_CONFIG.is_safari)try{await b("auth.set_user",JSON.stringify(e),t)}catch(e){console.error("Failed to store user in the serviceworker",e)}f.setItem("matcharena/"+t+"shared-id",btoa(JSON.stringify(e)))}},load_local_save:async function(e,t){var n=[],r="matcharena2/"+e+"save"+String(t),o=f.getItem(r);if(o&&(console.log("Got user save from local storage"),n.push(o)),window.yandex_safeStorage_get)try{var i=await window.yandex_safeStorage_get("ya_"+r);i&&(console.log("Got user save from yandex safe storage"),n.push(i))}catch(e){console.error("Failed to fetch save from yandex safe storage",e)}return n},store_local_save:async function(e,t,n){var r="matcharena2/"+e+"save"+String(t);if(n){if(window.yandex_safeStorage_set)try{await window.yandex_safeStorage_set("ya_"+r,n)}catch(e){console.error("Failed to store save data in the yandex safeStorage",e)}f.setItem(r,n)}}}),l.initialize_ui(r),function(){if(MA_CONFIG.fb_app){var e=new URLSearchParams(window.location.search).get("fb_app");e&&e in MA_CONFIG.fb_apps&&(MA_CONFIG.fb_app=MA_CONFIG.fb_apps[e]),u.initialize(r,MA_CONFIG.fb_app["app-id"])}}(),c.initialize(r),async function(){try{await s.initialize(MA_CONFIG.texts_path)}catch(e){console.log("Can't load translations: %s",e)}}(),function(e){var t=null;"vk"===MA_CONFIG.embed&&(t=_.get_reforged_promo_link()),t?v.show_reforged_promo(t,e):e()}(function(){a.MyPromise.future();p.embed(r),p.get_install_sw_promise().then(function(e){e?(console.log("We are allowed to install ServiceWorker"),console.log("But we will not to fix some issues..."),I()):(console.log("We are not allowed to install ServiceWorker"),I())},function(e){console.log("Promise for ServiceWorker installation rejected",e)}),function(){document.getElementById("preroll-play-wrapper");var e=!1;"yandex"===MA_CONFIG.embed&&h.should_show_preroll()&&(e=!0),e&&p.show_ad("preroll").then(function(e){var t=e.status,n=void 0;n="success"===t?"success":"failed-blocked"===t?"blocked":"failed",window.preroll_result=n},function(e){window.preroll_result="failed"})}(),o.initialize_app(r),r.expose({set_allow_preroll:function(e){f.setItem("matcharena/allow-preroll",e)},allow_offline_cache:function(){"yandex"===MA_CONFIG.embed&&(console.log("Granted permission to upload offline cache to ServiceWorker"),b("cache.build",null).then(function(e){console.log("Offline cache successfully uploaded to ServiceWorker",e)},function(e){console.log("Offline cache upload to ServiceWorker failed",e)}))}})})}e.exports=function(e,t){o=e,r=t,window.addEventListener("load",E)}},367:function(e,t,n){},368:function(e,t,n){},370:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=function(e,t){function n(e){"opened"==e.state?s.show_flash(!1):s.show_flash(!0)}(s=e).expose({fb_invite_friends:function(e){i.show_shadow_overlay(!0);var t=o.get_texts(["invite_request.title","invite_request.message"]).then(function(e){var t=c.uiAsync({method:"apprequests",message:e[1],title:e[0],filters:["app_non_users"]});return t.then(function(e){console.log("Invite friends",e)},function(e){console.error("Invite friends",e)})});return t.finally(function(){i.show_shadow_overlay(!1)}),t},fb_query_auth:O,fb_login:S,fb_logout:C,fb_consume_purchase:function(e){return y().then(function(){return c.apiAsync(e+"/consume","post")}).then(function(){return!0})},fb_purchase:function(e,t){var n={method:"pay",action:"purchaseiap",product_id:e};function a(){var e=r.MyPromise.future();return c.ui(n,function(t){!t||t.error?e.reject(t?t.error:null):e.resolve(t)}),e}var s=void 0;return t&&c?(console.log("Invoking fb_purchase in trusted context (user action)"),s=a()):(console.log("Invoking fb_purchase in untrusted context (no user action, via proxy)"),s=y().then(function(){var t=h[e],n=void 0;return n=t?t.price_string:m[e],o.get_texts(["modal.fb_purchase_proxy.gems"]).then(function(t){return i.show_modal_popup({header:"@"+v[e]+" "+t[0],text:"@"+n,button:"modal.fb_purchase_proxy.button"},"social",!0)})}).then(function(e){return e?a():Promise.reject("popup_cancelled")})),s.then(function(e){return e.error_code?Promise.reject(e.error_message):{id:e.purchase_token,product_id:e.product_id}})},fb_fetch_products:b,fb_fetch_purchases:E,fb_query_friends:I}),function(e,t,n){var r=void 0,o=e.getElementsByTagName(t)[0];e.getElementById(n)||((r=e.createElement(t)).id=n,r.onerror=function(){u.reject("failed to load FB")},r.src="//connect.facebook.net/en_US/sdk.js",o.parentNode.insertBefore(r,o))}(document,"script","facebook-jssdk"),window.fbAsyncInit=function(){c=window.FB,r.promisify(c,"api"),r.promisify(c,"ui"),c.init({appId:t,xfbml:!0,version:"v5.0",cookie:!0,hideFlashCallback:n}),c.getLoginStatus(N),c.Event.subscribe("auth.login",j),c.Event.subscribe("auth.logout",M),u.resolve(c)}};var r=n(10),o=n(60),i=n(11),a=n(35),s=void 0,u=r.MyPromise.future();u.catch(function(e){console.error("faield to load facebook:",e)});var c=void 0,l=null,d=!1,f=r.MyPromise.future(),p=null,_=!1,h={},m=a.default_prices,v=a.gems_amount,g=3;function y(){return r.MyPromise.with_timeout(u,g,function(){return g=Math.max(1,g-1),Promise.reject("fbsdk timeout")})}async function w(){await y();var e=async function(){return await c.apiAsync("/app/products")}(),t=async function(){return await f}();return function(e,t){if(!e)return null;for(var n=[],r=0;r<e.data.length;r++){var o=e.data[r],i={product_id:o.product_id,price_usd_cents:o.price_amount_cents,price_string:o.price,price_currency:"$",price_value:(o.price_amount_cents/100).toFixed(2)};if(t){var a={cents:Math.round(i.price_usd_cents*t.usd_exchange_inverse*(t.currency_offset/100)),offset:t.currency_offset,currency:t.user_currency};i.price_local=a,i.price_value=(a.cents/a.offset).toFixed(Math.log10(a.offset)),i.price_currency=a.currency,i.price_string=a.price=i.price_value+" "+i.price_currency}h[o.product_id]=i,n.push(i)}return console.log("Product info received:",n),n}(await e,await t)}async function b(){return p&&!_||(p=w()).catch(function(e){_=!0}),await p}function k(e){console.log("Fetching FB information for user %s",e.userID);var t=c.apiAsync("/me?fields=first_name,currency,locale,permissions");return t.then(function(e){f.resolve(e.currency)},function(e){f.resolve(null)}),t.then(function(t){var n=function(e){var t={};if(!e||!e.data)return t;for(var n=e.data,r=n.length,o=0;o<r;o++){var i=n[o];t[i.permission]=i.status}return t}(t.permissions),r={name:t.first_name,uid:t.id,locale:t.locale,access_token:e.accessToken,permissions:n};return console.log("FB user profile received"),r})}function I(){return y().then(function(){return c.apiAsync("/me/friends").then(function(e){for(var t=[],n=e.data.length,r=0;r<n;r++)t.push(e.data[r].id);return console.log("User friends: %s",JSON.stringify(t)),t},function(e){return console.warn("User friends fetch error: %s",e),Promise.reject(e)})},function(e){reject(e)})}function E(){return y().then(function(){return function e(t){var n={limit:100};t&&(n.after=t);var r=[];return c.apiAsync("/app/purchases","get",n).then(function(t){for(var n=t.data,o=0;o<n.length;o++){var i=n[o];if("charge"==i.payment_action_type){var a={id:i.purchase_token,product_id:i.product_id,consumed:i.consumed};r.push(a)}}if(t.paging&&t.paging.cursors&&t.paging.cursors.after)return e(t.paging.cursors.after)}).then(function(e){return r})}()})}function S(e,t,n){function o(){i.show_shadow_overlay(!1);var n=r.MyPromise.future();try{var o={scope:e.join(","),return_scopes:!0};t&&(o.auth_type="rerequest"),c.login(function(e){e.authResponse?(console.log("FB login succeeded"),l=k(e.authResponse),n.resolve(l)):(console.log("User cancelled login or did not fully authorize."),n.reject("cancelled"))},o)}catch(e){n.reject(e)}return n}i.show_shadow_overlay(!0);return(c&&(n||"facebook"===MA_CONFIG.embed)?o():y().then(function(){return"facebook"!==MA_CONFIG.embed?i.show_modal_popup("fb_login_proxy","social",!0).then(function(e){return e?o():Promise.reject("popup_cancelled")}):o()})).finally(function(){i.show_shadow_overlay(!1)})}var A=null;function O(e){if(A){var t=A;return A=null,t}return x(e)}function x(e){return(!l||d||e)&&(d=!1,(l=y().then(function(){return new Promise(function(e,t){c.getLoginStatus(function(n){"connected"===n.status?e(k(n.authResponse)):t("not connected")}),setTimeout(function(){t("facebook timeout")},1e4)})})).catch(function(e){console.log("FB auth failed: %s",e),d=!0})),l}function C(){return!!c&&(c.logout(),!0)}function P(e){e,console.log("FB user status updated: "+e),e?(f=r.MyPromise.future(),A=x(),p=null,_=!1,b().catch(function(e){console.warn("Failed to fetch products: ",e)})):(A=null,(f=r.MyPromise.future()).resolve(null),p=Promise.reject("not authorized").catch(function(e){}),_=!1)}function N(e){e&&"connected"==e.status?(console.log("FB: status: user authorized"),P(!0)):(console.log("FB: status: user not authorized"),P(!1))}function j(){console.log("FB: user login event"),P(!0)}function M(){console.log("FB: user logout event"),P(!1)}},371:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.initialize=function(e){a=e.enabled,s=e.external_rate?e.external_rate/100:1,m=!!localStorage.getItem("analytics-debug"),a&&(f=e["api-key"],o.default.getInstance().init(e["api-key"],null,null,function(){k()}),o.default.getInstance().setVersionName(MA_CONFIG.build_id),y())},t.reset_user=function(e){c=e,l={},k(),d=!0,o.default.getInstance().setUserId(c),y(),I()},t.update_user_params=function(e){for(var t in e)l[t]=e[t];d=!0,k()},t.send_event=function(e,t,n){if(!a)return;u?_?(v("waiting for uid and got event",t),p.push({params:S(l),event:t,args:S(n)}),h&&E()):v("filtered event",t):"beacon"===e?(v("sending beacon event",t),p.push({params:S(l),event:t,args:S(n)}),E()):(v("sending sync event",t),I(),A(t,n))};var o=function(e){return e&&e.__esModule?e:{default:e}}(n(372));var i=n(377),a=!1,s=void 0,u=!1,c=null,l={},d=!0,f=null,p=[],_=!1,h=!1,m=!1;function v(){m&&(arguments[0]="[ANALYTICS] "+arguments[0],console.log.apply(console,arguments))}var g=["utm_source","utm_medium","utm_campaign","utm_content","utm_term"];function y(){var e=new URLSearchParams(window.location.search),t=new o.default.Identify;t.setOnce("partner_install",window.MA_CONFIG.partner),t.set("partner",window.MA_CONFIG.partner),t.set("sandbox",window.ma_is_sandbox);var n=window.MA_CONFIG.referrer;n&&(t.set("referrer",n),t.setOnce("referrer_install",n));var r=window.MA_CONFIG.skin;r&&(t.set("skin",r),t.setOnce("skin_install",r)),window.MA_CONFIG.needs_ios_fix?t.set("test.ios14fix",!0):t.set("test.ios14fix",!1);for(var i={},a=!1,s=g.length,u=0;u<s;u++){var c=g[u],l=e.get(c);l&&(i[c]=l,a=!0)}a&&t.setOnce("utm_install",i),o.default.getInstance().identify(t)}var w={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,b:11,c:12,d:13,e:14,f:15,A:10,B:11,C:12,D:13,E:14,F:15};function b(e){for(var t=0,n=i(e),r=0;r<n.length;r++)t=((16*t|0)+(0|w[n[r]]))%1e6;return t/1e6>s}function k(){_=!1,l&&+l.pay_count>0?u=!1:null==c?(u=!0,_=!0,v("user filtered and waiting for uid")):v("user filtered set to",u=b(c))}function I(){if(!_&&0!==p.length){var e=p;if(p=[],e&&!u){var t=l;for(var n in e){var r=e[n];l=r.params,A(r.event,r.args)}l=t}}}function E(){if(0!==p.length){var e=o.default.getInstance(),t=e.options;if(navigator&&navigator.sendBeacon){var n=p;if(p=[],!u){var r=[];for(var i in n){var a=n[i];r.push({event_type:a.event,event_properties:a.args,user_properties:a.user_params,user_id:t.userId,device_id:t.deviceId,session_id:e._sessionId||-1})}v("submitting "+r.length+" beacons"),function(e){o.default.getInstance().options;var t=new FormData;t.append("api_key",f),t.append("event",JSON.stringify(e)),navigator.sendBeacon("https://api.amplitude.com/httpapi",t)}(r)}}else I()}}function S(e){if(e instanceof Array)return e.map(S);if("object"===(void 0===e?"undefined":r(e))){var t={};for(var n in e)t[n]=e[n];return t}return e}function A(e,t){v("submit sync event",e),d&&(d=!1,o.default.getInstance().setUserProperties(l)),o.default.getInstance().logEvent(e,t)}window.addEventListener("beforeunload",function(){if(h=!0,a){if(_){var e=o.default.getInstance().options,t=e.userId,n=e.deviceId;v("was waiting for uid and is flushing, user_filtered is",u=b(t||n))}E()}return null})},372:function(e,t,n){"use strict";(function(r,o,i){var a,s,u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(r,o){"object"==u(t)&&void 0!==e?e.exports=o():void 0===(s="function"==typeof(a=o)?a.call(t,n,t,e):a)||(e.exports=s)}(0,function(){function e(e,t){return e(t={exports:{}},t.exports),t.exports}function t(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}function n(){var e;try{e=document.cookie}catch(e){return"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e.stack||e),{}}return function(e){var t,n={},r=e.split(/ *; */);if(""==r[0])return n;for(var o=0;o<r.length;++o)n[s((t=r[o].split("="))[0])]=s(t[1]);return n}(e)}function a(e){try{return encodeURIComponent(e)}catch(t){N("error `encode(%o)` - %o",e,t)}}function s(e){try{return decodeURIComponent(e)}catch(t){N("error `decode(%o)` - %o",e,t)}}function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function d(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function f(e){var t=this.__data__=new he(e);this.size=t.size}function p(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function _(e){switch(void 0===e?"undefined":u(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function h(e,t,n,r){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==(void 0===e?"undefined":u(e))?m(Ht(e),function(r){var o=encodeURIComponent(_(r))+n;return Jt(e[r])?m(e[r],function(e){return o+encodeURIComponent(_(e))}).join(t):o+encodeURIComponent(_(e[r]))}).join(t):r?encodeURIComponent(_(r))+n+encodeURIComponent(_(e)):""}function m(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}function v(e,t,n,r){t=t||"&",n=n||"=";var o={};if("string"!=typeof e||0===e.length)return o;var i=/\+/g;e=e.split(t);var a=1e3;r&&"number"==typeof r.maxKeys&&(a=r.maxKeys);var s=e.length;a>0&&s>a&&(s=a);for(var u=0;u<s;++u){var c,l,d,f,_=e[u].replace(i,"%20"),h=_.indexOf(n);h>=0?(c=_.substr(0,h),l=_.substr(h+1)):(c=_,l=""),d=decodeURIComponent(c),f=decodeURIComponent(l),p(o,d)?Jt(o[d])?o[d].push(f):o[d]=[o[d],f]:o[d]=f}return o}var g,y="undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:{},w=(e(function(e,t){(function(){function n(e,t){function o(e){if(o[e]!==v)return o[e];var n;if("bug-string-char-index"==e)n="a"!="a"[0];else if("json"==e)n=o("json-stringify")&&o("json-parse");else{var r,i='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var u=t.stringify,c="function"==typeof u&&w;if(c){(r=function(){return 1}).toJSON=r;try{c="0"===u(0)&&"0"===u(new a)&&'""'==u(new s)&&u(y)===v&&u(v)===v&&u()===v&&"1"===u(r)&&"[1]"==u([r])&&"[null]"==u([v])&&"null"==u(null)&&"[null,null,null]"==u([v,y,null])&&u({a:[r,!0,!1,null,"\0\b\n\f\r\t"]})==i&&"1"===u(null,r)&&"[\n 1,\n 2\n]"==u([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==u(new l(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==u(new l(864e13))&&'"-000001-01-01T00:00:00.000Z"'==u(new l(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==u(new l(-1))}catch(e){c=!1}}n=c}if("json-parse"==e){var d=t.parse;if("function"==typeof d)try{if(0===d("0")&&!d(!1)){var f=5==(r=d(i)).a.length&&1===r.a[0];if(f){try{f=!d('"\t"')}catch(e){}if(f)try{f=1!==d("01")}catch(e){}if(f)try{f=1!==d("1.")}catch(e){}}}}catch(e){f=!1}n=f}}return o[e]=!!n}e||(e=i.Object()),t||(t=i.Object());var a=e.Number||i.Number,s=e.String||i.String,c=e.Object||i.Object,l=e.Date||i.Date,d=e.SyntaxError||i.SyntaxError,f=e.TypeError||i.TypeError,p=e.Math||i.Math,_=e.JSON||i.JSON;"object"==(void 0===_?"undefined":u(_))&&_&&(t.stringify=_.stringify,t.parse=_.parse);var h,m,v,g=c.prototype,y=g.toString,w=new l(-0xc782b5b800cec);try{w=-109252==w.getUTCFullYear()&&0===w.getUTCMonth()&&1===w.getUTCDate()&&10==w.getUTCHours()&&37==w.getUTCMinutes()&&6==w.getUTCSeconds()&&708==w.getUTCMilliseconds()}catch(e){}if(!o("json")){var b=o("bug-string-char-index");if(!w)var k=p.floor,I=[0,31,59,90,120,151,181,212,243,273,304,334],E=function(e,t){return I[t]+365*(e-1970)+k((e-1969+(t=+(t>1)))/4)-k((e-1901+t)/100)+k((e-1601+t)/400)};if((h=g.hasOwnProperty)||(h=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=y?h=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,h=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,h.call(this,e)}),m=function(e,t){var n,o,i,a=0;for(i in(n=function(){this.valueOf=0}).prototype.valueOf=0,o=new n)h.call(o,i)&&a++;return n=o=null,a?m=2==a?function(e,t){var n,r={},o="[object Function]"==y.call(e);for(n in e)o&&"prototype"==n||h.call(r,n)||!(r[n]=1)||!h.call(e,n)||t(n)}:function(e,t){var n,r,o="[object Function]"==y.call(e);for(n in e)o&&"prototype"==n||!h.call(e,n)||(r="constructor"===n)||t(n);(r||h.call(e,n="constructor"))&&t(n)}:(o=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],m=function(e,t){var n,i,a="[object Function]"==y.call(e),s=!a&&"function"!=typeof e.constructor&&r[u(e.hasOwnProperty)]&&e.hasOwnProperty||h;for(n in e)a&&"prototype"==n||!s.call(e,n)||t(n);for(i=o.length;n=o[--i];s.call(e,n)&&t(n));}),m(e,t)},!o("json-stringify")){var S={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},A=function(e,t){return("000000"+(t||0)).slice(-e)},O=function(e){for(var t='"',n=0,r=e.length,o=!b||r>10,i=o&&(b?e.split(""):e);n<r;n++){var a=e.charCodeAt(n);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=S[a];break;default:if(a<32){t+="\\u00"+A(2,a.toString(16));break}t+=o?i[n]:e.charAt(n)}}return t+'"'};t.stringify=function(e,t,n){var o,i,a,s;if(r[void 0===t?"undefined":u(t)]&&t)if("[object Function]"==(s=y.call(t)))i=t;else if("[object Array]"==s){a={};for(var c,l=0,d=t.length;l<d;c=t[l++],("[object String]"==(s=y.call(c))||"[object Number]"==s)&&(a[c]=1));}if(n)if("[object Number]"==(s=y.call(n))){if((n-=n%1)>0)for(o="",n>10&&(n=10);o.length<n;o+=" ");}else"[object String]"==s&&(o=n.length<=10?n:n.slice(0,10));return function e(t,n,r,o,i,a,s){var c,l,d,p,_,g,w,b,I,S,x,C,P,N,j,M;try{c=n[t]}catch(t){}if("object"==(void 0===c?"undefined":u(c))&&c)if("[object Date]"!=(l=y.call(c))||h.call(c,"toJSON"))"function"==typeof c.toJSON&&("[object Number]"!=l&&"[object String]"!=l&&"[object Array]"!=l||h.call(c,"toJSON"))&&(c=c.toJSON(t));else if(c>-1/0&&c<1/0){if(E){for(_=k(c/864e5),d=k(_/365.2425)+1970-1;E(d+1,0)<=_;d++);for(p=k((_-E(d,0))/30.42);E(d,p+1)<=_;p++);_=1+_-E(d,p),w=k((g=(c%864e5+864e5)%864e5)/36e5)%24,b=k(g/6e4)%60,I=k(g/1e3)%60,S=g%1e3}else d=c.getUTCFullYear(),p=c.getUTCMonth(),_=c.getUTCDate(),w=c.getUTCHours(),b=c.getUTCMinutes(),I=c.getUTCSeconds(),S=c.getUTCMilliseconds();c=(d<=0||d>=1e4?(d<0?"-":"+")+A(6,d<0?-d:d):A(4,d))+"-"+A(2,p+1)+"-"+A(2,_)+"T"+A(2,w)+":"+A(2,b)+":"+A(2,I)+"."+A(3,S)+"Z"}else c=null;if(r&&(c=r.call(n,t,c)),null===c)return"null";if("[object Boolean]"==(l=y.call(c)))return""+c;if("[object Number]"==l)return c>-1/0&&c<1/0?""+c:"null";if("[object String]"==l)return O(""+c);if("object"==(void 0===c?"undefined":u(c))){for(N=s.length;N--;)if(s[N]===c)throw f();if(s.push(c),x=[],j=a,a+=i,"[object Array]"==l){for(P=0,N=c.length;P<N;P++)C=e(P,c,r,o,i,a,s),x.push(C===v?"null":C);M=x.length?i?"[\n"+a+x.join(",\n"+a)+"\n"+j+"]":"["+x.join(",")+"]":"[]"}else m(o||c,function(t){var n=e(t,c,r,o,i,a,s);n!==v&&x.push(O(t)+":"+(i?" ":"")+n)}),M=x.length?i?"{\n"+a+x.join(",\n"+a)+"\n"+j+"}":"{"+x.join(",")+"}":"{}";return s.pop(),M}}("",((c={})[""]=e,c),i,a,o,"",[])}}if(!o("json-parse")){var x,C,P=s.fromCharCode,N={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},j=function(){throw x=C=null,d()},M=function(){for(var e,t,n,r,o,i=C,a=i.length;x<a;)switch(o=i.charCodeAt(x)){case 9:case 10:case 13:case 32:x++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=b?i.charAt(x):i[x],x++,e;case 34:for(e="@",x++;x<a;)if((o=i.charCodeAt(x))<32)j();else if(92==o)switch(o=i.charCodeAt(++x)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=N[o],x++;break;case 117:for(t=++x,n=x+4;x<n;x++)(o=i.charCodeAt(x))>=48&&o<=57||o>=97&&o<=102||o>=65&&o<=70||j();e+=P("0x"+i.slice(t,x));break;default:j()}else{if(34==o)break;for(o=i.charCodeAt(x),t=x;o>=32&&92!=o&&34!=o;)o=i.charCodeAt(++x);e+=i.slice(t,x)}if(34==i.charCodeAt(x))return x++,e;j();default:if(t=x,45==o&&(r=!0,o=i.charCodeAt(++x)),o>=48&&o<=57){for(48==o&&(o=i.charCodeAt(x+1))>=48&&o<=57&&j(),r=!1;x<a&&(o=i.charCodeAt(x))>=48&&o<=57;x++);if(46==i.charCodeAt(x)){for(n=++x;n<a&&(o=i.charCodeAt(n))>=48&&o<=57;n++);n==x&&j(),x=n}if(101==(o=i.charCodeAt(x))||69==o){for(43!=(o=i.charCodeAt(++x))&&45!=o||x++,n=x;n<a&&(o=i.charCodeAt(n))>=48&&o<=57;n++);n==x&&j(),x=n}return+i.slice(t,x)}if(r&&j(),"true"==i.slice(x,x+4))return x+=4,!0;if("false"==i.slice(x,x+5))return x+=5,!1;if("null"==i.slice(x,x+4))return x+=4,null;j()}return"$"},F=function(e,t,n){var r=T(e,t,n);r===v?delete e[t]:e[t]=r},T=function(e,t,n){var r,o=e[t];if("object"==(void 0===o?"undefined":u(o))&&o)if("[object Array]"==y.call(o))for(r=o.length;r--;)F(o,r,n);else m(o,function(e){F(o,e,n)});return n.call(e,t,o)};t.parse=function(e,t){var n,r;return x=0,C=""+e,n=function e(t){var n,r;if("$"==t&&j(),"string"==typeof t){if("@"==(b?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(n=[];"]"!=(t=M());r||(r=!0))r&&(","==t?"]"==(t=M())&&j():j()),","==t&&j(),n.push(e(t));return n}if("{"==t){for(n={};"}"!=(t=M());r||(r=!0))r&&(","==t?"}"==(t=M())&&j():j()),","!=t&&"string"==typeof t&&"@"==(b?t.charAt(0):t[0])&&":"==M()||j(),n[t.slice(1)]=e(M());return n}j()}return t}(M()),"$"!=M()&&j(),x=C=null,t&&"[object Function]"==y.call(t)?T(((r={})[""]=n,r),"",t):n}}}return t.runInContext=n,t}var r={function:!0,object:!0},o=r.object&&t&&!t.nodeType&&t,i=r["undefined"==typeof window?"undefined":u(window)]&&window||this,a=o&&r.object&&e&&!e.nodeType&&"object"==(void 0===y?"undefined":u(y))&&y;if(!a||a.global!==a&&a.window!==a&&a.self!==a||(i=a),o)n(i,o);else{var s=i.JSON,c=i.JSON3,l=!1,d=n(i,i.JSON3={noConflict:function(){return l||(l=!0,i.JSON=s,i.JSON3=c,s=c=null),d}});i.JSON={parse:d.parse,stringify:d.stringify}}}).call(y)}),{DEFAULT_INSTANCE:"$default_instance",API_VERSION:2,MAX_STRING_LENGTH:4096,MAX_PROPERTY_KEYS:1e3,IDENTIFY_EVENT:"$identify",GROUP_IDENTIFY_EVENT:"$groupidentify",LAST_EVENT_ID:"amplitude_lastEventId",LAST_EVENT_TIME:"amplitude_lastEventTime",LAST_IDENTIFY_ID:"amplitude_lastIdentifyId",LAST_SEQUENCE_NUMBER:"amplitude_lastSequenceNumber",SESSION_ID:"amplitude_sessionId",DEVICE_ID:"amplitude_deviceId",OPT_OUT:"amplitude_optOut",USER_ID:"amplitude_userId",COOKIE_TEST:"amplitude_cookie_test",REVENUE_EVENT:"revenue_amount",REVENUE_PRODUCT_ID:"$productId",REVENUE_QUANTITY:"$quantity",REVENUE_PRICE:"$price",REVENUE_REVENUE_TYPE:"$revenueType",AMP_DEVICE_ID_PARAM:"amp_device_id"}),b=function(e){for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t},k=function(e){for(var t="",n=0,r=0,o=0,i=0;n<e.length;)(r=e.charCodeAt(n))<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(o=e.charCodeAt(n+1),t+=String.fromCharCode((31&r)<<6|63&o),n+=2):(o=e.charCodeAt(n+1),i=e.charCodeAt(n+2),t+=String.fromCharCode((15&r)<<12|(63&o)<<6|63&i),n+=3);return t},I={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){try{if(window.btoa&&window.atob)return window.btoa(unescape(encodeURIComponent(e)))}catch(e){}return I._encode(e)},_encode:function(e){var t,n,r,o,i,a,s,u="",c=0;for(e=b(e);c<e.length;)o=(t=e.charCodeAt(c++))>>2,i=(3&t)<<4|(n=e.charCodeAt(c++))>>4,a=(15&n)<<2|(r=e.charCodeAt(c++))>>6,s=63&r,isNaN(n)?a=s=64:isNaN(r)&&(s=64),u=u+I._keyStr.charAt(o)+I._keyStr.charAt(i)+I._keyStr.charAt(a)+I._keyStr.charAt(s);return u},decode:function(e){try{if(window.btoa&&window.atob)return decodeURIComponent(escape(window.atob(e)))}catch(e){}return I._decode(e)},_decode:function(e){var t,n,r,o,i,a,s="",u=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<e.length;)t=I._keyStr.indexOf(e.charAt(u++))<<2|(o=I._keyStr.indexOf(e.charAt(u++)))>>4,n=(15&o)<<4|(i=I._keyStr.indexOf(e.charAt(u++)))>>2,r=(3&i)<<6|(a=I._keyStr.indexOf(e.charAt(u++))),s+=String.fromCharCode(t),64!==i&&(s+=String.fromCharCode(n)),64!==a&&(s+=String.fromCharCode(r));return k(s)}},E=e(function(e,t){t.parse=function(e){var t=document.createElement("a");return t.href=e,{href:t.href,host:t.host||location.host,port:"0"===t.port||""===t.port?function(e){switch(t.protocol){case"http:":return 80;case"https:":return 443;default:return location.port}}():t.port,hash:t.hash,hostname:t.hostname||location.hostname,pathname:"/"!=t.pathname.charAt(0)?"/"+t.pathname:t.pathname,protocol:t.protocol&&":"!=t.protocol?t.protocol:location.protocol,search:t.search,query:t.search.slice(1)}},t.isAbsolute=function(e){return 0==e.indexOf("//")||!!~e.indexOf("://")},t.isRelative=function(e){return!t.isAbsolute(e)},t.isCrossDomain=function(e){e=t.parse(e);var n=t.parse(window.location.href);return e.hostname!==n.hostname||e.port!==n.port||e.protocol!==n.protocol}}),S=1e3,A=6e4,O=36e5,x=24*O,C=function(e,n){n=n||{};var r=void 0===e?"undefined":u(e);if("string"===r&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"days":case"day":case"d":return n*x;case"hours":case"hour":case"hrs":case"hr":case"h":return n*O;case"minutes":case"minute":case"mins":case"min":case"m":return n*A;case"seconds":case"second":case"secs":case"sec":case"s":return n*S;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(e);if("number"===r&&!1===isNaN(e))return n.long?function(e){return t(e,x,"day")||t(e,O,"hour")||t(e,A,"minute")||t(e,S,"second")||e+" ms"}(e):function(e){return e>=x?Math.round(e/x)+"d":e>=O?Math.round(e/O)+"h":e>=A?Math.round(e/A)+"m":e>=S?Math.round(e/S)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))},P=e(function(e,t){function n(e){function n(){if(n.enabled){var e=n,r=+new Date,i=r-(o||r);e.diff=i,e.prev=o,e.curr=r,o=r;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var u=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;u++;var o=t.formatters[r];if("function"==typeof o){var i=a[u];n=o.call(e,i),a.splice(u,1),u--}return n}),t.formatArgs.call(e,a),(n.log||t.log||console.log.bind(console)).apply(e,a)}}var o;return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),n.destroy=r,"function"==typeof t.init&&t.init(n),t.instances.push(n),n}function r(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];var n,r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var i=t.instances[n];i.enabled=t.enabled(i.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=C,t.instances=[],t.names=[],t.skips=[],t.formatters={}}),N=e(function(e,t){function n(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==o&&"env"in o&&(e=o.env.DEBUG),e}(t=e.exports=P).log=function(){return"object"==("undefined"==typeof console?"undefined":u(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&("%c"===e&&(i=++o))}),e.splice(i,0,r)}},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=n,t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(n())})("cookie"),j=function(e,t,r){switch(arguments.length){case 3:case 2:return function(e,t,n){n=n||{};var r=a(e)+"="+a(t);null==t&&(n.maxage=-1),n.maxage&&(n.expires=new Date(+new Date+n.maxage)),n.path&&(r+="; path="+n.path),n.domain&&(r+="; domain="+n.domain),n.expires&&(r+="; expires="+n.expires.toUTCString()),n.secure&&(r+="; secure"),document.cookie=r}(e,t,r);case 1:return function(e){return n()[e]}(e);default:return n()}},M=e(function(e,t){function n(e){for(var n=t.cookie,r=t.levels(e),o=0;o<r.length;++o){var i=r[o],a={domain:"."+i};if(n("__tld__",1,a),n("__tld__"))return n("__tld__",null,a),i}return""}var r=E.parse;n.levels=function(e){var t=r(e).hostname.split("."),n=t[t.length-1],o=[];if(4===t.length&&n===parseInt(n,10))return o;if(t.length<=1)return o;for(var i=t.length-2;i>=0;--i)o.push(t.slice(i).join("."));return o},n.cookie=j,t=e.exports=n}),F="function"==typeof Symbol&&"symbol"==u(Symbol.iterator)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":u(e)},T=Object.prototype.toString,R=function(e){switch(T.call(e)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===e?"null":void 0===e?"undefined":e!=e?"nan":e&&1===e.nodeType?"element":void 0!==i&&"function"==typeof i.isBuffer&&i.isBuffer(e)?"buffer":void 0===(e=e.valueOf?e.valueOf():Object.prototype.valueOf.apply(e))?"undefined":F(e)},L={DISABLE:0,ERROR:1,WARN:2,INFO:3},U=L.WARN,D={error:function(e){U>=L.ERROR&&q(e)},warn:function(e){U>=L.WARN&&q(e)},info:function(e){U>=L.INFO&&q(e)}},q=function(e){try{console.log("[Amplitude] "+e)}catch(e){}},G=function(e){var t=R(e);if("object"!==t)return D.error("Error: invalid properties format. Expecting Javascript object, received "+t+", ignoring"),{};if(Object.keys(e).length>w.MAX_PROPERTY_KEYS)return D.error("Error: too many properties (more than 1000), ignoring"),{};var n={};for(var r in e)if(e.hasOwnProperty(r)){var o=r,i=R(o);"string"!==i&&(o=String(o),D.warn("WARNING: Non-string property key, received type "+i+', coercing to string "'+o+'"'));var a=B(o,e[r]);null!==a&&(n[o]=a)}return n},z=["null","nan","undefined","function","arguments","regexp","element"],B=function e(t,n){var r=R(n);if(-1!==z.indexOf(r))D.warn('WARNING: Property key "'+t+'" with invalid value type '+r+", ignoring"),n=null;else if("error"===r)n=String(n),D.warn('WARNING: Property key "'+t+'" with value type error, coercing to '+n);else if("array"===r){for(var o=[],i=0;i<n.length;i++){var a=n[i],s=R(a);"array"!==s&&"object"!==s?o.push(e(t,a)):D.warn("WARNING: Cannot have "+s+" nested in an array property value, skipping")}n=o}else"object"===r&&(n=G(n));return n},V=function(e,t){var n=R(t);if("string"===n)return t;if("date"===n||"number"===n||"boolean"===n)return t=String(t),D.warn("WARNING: Non-string groupName, received type "+n+', coercing to string "'+t+'"'),t;if("array"===n){for(var r=[],o=0;o<t.length;o++){var i=t[o],a=R(i);"array"!==a&&"object"!==a?"string"===a?r.push(i):"date"!==a&&"number"!==a&&"boolean"!==a||(i=String(i),D.warn("WARNING: Non-string groupName, received type "+a+', coercing to string "'+i+'"'),r.push(i)):D.warn("WARNING: Skipping nested "+a+" in array groupName")}return r}D.warn("WARNING: Non-string groupName, received type "+n+". Please use strings or array of strings for groupName")},K=function(e){U=L[e]||U},W=D,J=function(e){return!e||0===e.length},H=function(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null===n?void 0:decodeURIComponent(n[1].replace(/\+/g," "))},Y=function e(t){if("array"===R(t))for(var n=0;n<t.length;n++)t[n]=e(t[n]);else if("object"===R(t))for(var r in t)t.hasOwnProperty(r)&&(t[r]=e(t[r]));else t=function(e){return"string"===R(e)&&e.length>w.MAX_STRING_LENGTH?e.substring(0,w.MAX_STRING_LENGTH):e}(t);return t},$=function(e){var t=R(e);if("object"!==t)return D.error("Error: invalid groups format. Expecting Javascript object, received "+t+", ignoring"),{};var n={};for(var r in e)if(e.hasOwnProperty(r)){var o=r,i=R(o);"string"!==i&&(o=String(o),D.warn("WARNING: Non-string groupType, received type "+i+', coercing to string "'+o+'"'));var a=V(0,e[r]);null!==a&&(n[o]=a)}return n},X=function(e,t,n){return R(e)===n||(D.error("Invalid "+t+" input type. Expected "+n+" but received "+R(e)),!1)},Q=G,Z={expirationDays:void 0,domain:void 0},ee=function(e){var t="";return Z.domain&&(t="."===Z.domain.charAt(0)?Z.domain.substring(1):Z.domain),e+t},te=function(e){try{for(var t=ee(e)+"=",n=document.cookie.split(";"),r=null,o=0;o<n.length;o++){for(var i=n[o];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t)){r=i.substring(t.length,i.length);break}}return r?JSON.parse(I.decode(r)):null}catch(e){return null}},ne=function(e,t){try{return re(ee(e),I.encode(JSON.stringify(t)),Z),!0}catch(e){return!1}},re=function(e,t,n){var r=null!==t?n.expirationDays:-1;if(r){var o=new Date;o.setTime(o.getTime()+24*r*60*60*1e3),r=o}var i=e+"="+t;r&&(i+="; expires="+r.toUTCString()),i+="; path=/",n.domain&&(i+="; domain="+n.domain),document.cookie=i},oe=function(e){try{return re(ee(e),null,Z),!0}catch(e){return!1}},ie={reset:function(){Z={expirationDays:void 0,domain:void 0}},options:function(e){if(0===arguments.length)return Z;e=e||{},Z.expirationDays=e.expirationDays;var t=J(e.domain)?"."+M(window.location.href):e.domain,n=Math.random();Z.domain=t,ne("amplitude_test",n);var r=te("amplitude_test");r&&r===n||(t=null),oe("amplitude_test"),Z.domain=t},get:te,set:ne,remove:oe};if(function(){var e,t=new Date;try{return window.localStorage.setItem(t,t),e=window.localStorage.getItem(t)===String(t),window.localStorage.removeItem(t),e}catch(e){}return!1}())g=window.localStorage;else if(window.globalStorage)try{g=window.globalStorage[window.location.hostname]}catch(e){}else{var ae=document.createElement("div"),se="localStorage";ae.style.display="none",document.getElementsByTagName("head")[0].appendChild(ae),ae.addBehavior&&(ae.addBehavior("#default#userdata"),g={length:0,setItem:function(e,t){ae.load(se),ae.getAttribute(e)||this.length++,ae.setAttribute(e,t),ae.save(se)},getItem:function(e){return ae.load(se),ae.getAttribute(e)},removeItem:function(e){ae.load(se),ae.getAttribute(e)&&this.length--,ae.removeAttribute(e),ae.save(se)},clear:function(){ae.load(se);for(var e,t=0;e=ae.XMLDocument.documentElement.attributes[t++];)ae.removeAttribute(e.name);ae.save(se),this.length=0},key:function(e){return ae.load(se),ae.XMLDocument.documentElement.attributes[e]}},ae.load(se),g.length=ae.XMLDocument.documentElement.attributes.length)}g||(g={length:0,setItem:function(e,t){},getItem:function(e){},removeItem:function(e){},clear:function(){},key:function(e){}});var ue=g,ce=function(){this.storage=null};ce.prototype._cookiesEnabled=function(){var e,t=String(new Date);try{return ie.set(w.COOKIE_TEST,t),e=ie.get(w.COOKIE_TEST)===t,ie.remove(w.COOKIE_TEST),e}catch(e){}return!1},ce.prototype.getStorage=function(){return null!==this.storage?this.storage:(this._cookiesEnabled()?this.storage=ie:this.storage={_options:{expirationDays:void 0,domain:void 0},reset:function(){this._options={expirationDays:void 0,domain:void 0}},options:function(e){return 0===arguments.length?this._options:(e=e||{},this._options.expirationDays=e.expirationDays||this._options.expirationDays,this._options.domain=e.domain||this._options.domain||window.location.hostname,this._options)},get:function(e){try{return JSON.parse(ue.getItem("amp_cookiestore_"+e))}catch(e){}return null},set:function(e,t){try{return ue.setItem("amp_cookiestore_"+e,JSON.stringify(t)),!0}catch(e){}return!1},remove:function(e){try{ue.removeItem("amp_cookiestore_"+e)}catch(e){return!1}}},this.storage)};var le=function(){this.userPropertiesOperations={},this.properties=[]};le.prototype.add=function(e,t){return"number"===R(t)||"string"===R(t)?this._addOperation("$add",e,t):W.error("Unsupported type for value: "+R(t)+", expecting number or string"),this},le.prototype.append=function(e,t){return this._addOperation("$append",e,t),this},le.prototype.clearAll=function(){return Object.keys(this.userPropertiesOperations).length>0?(this.userPropertiesOperations.hasOwnProperty("$clearAll")||W.error("Need to send $clearAll on its own Identify object without any other operations, skipping $clearAll"),this):(this.userPropertiesOperations.$clearAll="-",this)},le.prototype.prepend=function(e,t){return this._addOperation("$prepend",e,t),this},le.prototype.set=function(e,t){return this._addOperation("$set",e,t),this},le.prototype.setOnce=function(e,t){return this._addOperation("$setOnce",e,t),this},le.prototype.unset=function(e){return this._addOperation("$unset",e,"-"),this},le.prototype._addOperation=function(e,t,n){this.userPropertiesOperations.hasOwnProperty("$clearAll")?W.error("This identify already contains a $clearAll operation, skipping operation "+e):-1===this.properties.indexOf(t)?(this.userPropertiesOperations.hasOwnProperty(e)||(this.userPropertiesOperations[e]={}),this.userPropertiesOperations[e][t]=n,this.properties.push(t)):W.error('User property "'+t+'" already used in this identify, skipping operation '+e)};var de=e(function(e){!function(t){function n(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function r(e,t,r,o,i,a){return n(function(e,t){return e<<i|e>>>32-i}(n(n(t,e),n(o,a))),r)}function o(e,t,n,o,i,a,s){return r(t&n|~t&o,e,t,i,a,s)}function i(e,t,n,o,i,a,s){return r(t&o|n&~o,e,t,i,a,s)}function a(e,t,n,o,i,a,s){return r(t^n^o,e,t,i,a,s)}function s(e,t,n,o,i,a,s){return r(n^(t|~o),e,t,i,a,s)}function u(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var r,u,c,l,d,f=1732584193,p=-271733879,_=-1732584194,h=271733878;for(r=0;r<e.length;r+=16)u=f,c=p,l=_,d=h,p=s(p=s(p=s(p=s(p=a(p=a(p=a(p=a(p=i(p=i(p=i(p=i(p=o(p=o(p=o(p=o(p,_=o(_,h=o(h,f=o(f,p,_,h,e[r],7,-680876936),p,_,e[r+1],12,-389564586),f,p,e[r+2],17,606105819),h,f,e[r+3],22,-1044525330),_=o(_,h=o(h,f=o(f,p,_,h,e[r+4],7,-176418897),p,_,e[r+5],12,1200080426),f,p,e[r+6],17,-1473231341),h,f,e[r+7],22,-45705983),_=o(_,h=o(h,f=o(f,p,_,h,e[r+8],7,1770035416),p,_,e[r+9],12,-1958414417),f,p,e[r+10],17,-42063),h,f,e[r+11],22,-1990404162),_=o(_,h=o(h,f=o(f,p,_,h,e[r+12],7,1804603682),p,_,e[r+13],12,-40341101),f,p,e[r+14],17,-1502002290),h,f,e[r+15],22,1236535329),_=i(_,h=i(h,f=i(f,p,_,h,e[r+1],5,-165796510),p,_,e[r+6],9,-1069501632),f,p,e[r+11],14,643717713),h,f,e[r],20,-373897302),_=i(_,h=i(h,f=i(f,p,_,h,e[r+5],5,-701558691),p,_,e[r+10],9,38016083),f,p,e[r+15],14,-660478335),h,f,e[r+4],20,-405537848),_=i(_,h=i(h,f=i(f,p,_,h,e[r+9],5,568446438),p,_,e[r+14],9,-1019803690),f,p,e[r+3],14,-187363961),h,f,e[r+8],20,1163531501),_=i(_,h=i(h,f=i(f,p,_,h,e[r+13],5,-1444681467),p,_,e[r+2],9,-51403784),f,p,e[r+7],14,1735328473),h,f,e[r+12],20,-1926607734),_=a(_,h=a(h,f=a(f,p,_,h,e[r+5],4,-378558),p,_,e[r+8],11,-2022574463),f,p,e[r+11],16,1839030562),h,f,e[r+14],23,-35309556),_=a(_,h=a(h,f=a(f,p,_,h,e[r+1],4,-1530992060),p,_,e[r+4],11,1272893353),f,p,e[r+7],16,-155497632),h,f,e[r+10],23,-1094730640),_=a(_,h=a(h,f=a(f,p,_,h,e[r+13],4,681279174),p,_,e[r],11,-358537222),f,p,e[r+3],16,-722521979),h,f,e[r+6],23,76029189),_=a(_,h=a(h,f=a(f,p,_,h,e[r+9],4,-640364487),p,_,e[r+12],11,-421815835),f,p,e[r+15],16,530742520),h,f,e[r+2],23,-995338651),_=s(_,h=s(h,f=s(f,p,_,h,e[r],6,-198630844),p,_,e[r+7],10,1126891415),f,p,e[r+14],15,-1416354905),h,f,e[r+5],21,-57434055),_=s(_,h=s(h,f=s(f,p,_,h,e[r+12],6,1700485571),p,_,e[r+3],10,-1894986606),f,p,e[r+10],15,-1051523),h,f,e[r+1],21,-2054922799),_=s(_,h=s(h,f=s(f,p,_,h,e[r+8],6,1873313359),p,_,e[r+15],10,-30611744),f,p,e[r+6],15,-1560198380),h,f,e[r+13],21,1309151649),_=s(_,h=s(h,f=s(f,p,_,h,e[r+4],6,-145523070),p,_,e[r+11],10,-1120210379),f,p,e[r+2],15,718787259),h,f,e[r+9],21,-343485551),f=n(f,u),p=n(p,c),_=n(_,l),h=n(h,d);return[f,p,_,h]}function c(e){var t,n="",r=32*e.length;for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function l(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function d(e){var t,n,r="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),r+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return r}function f(e){return unescape(encodeURIComponent(e))}function p(e){return function(e){return c(u(l(e),8*e.length))}(f(e))}function _(e,t){return function(e,t){var n,r,o=l(e),i=[],a=[];for(i[15]=a[15]=void 0,o.length>16&&(o=u(o,8*e.length)),n=0;n<16;n+=1)i[n]=909522486^o[n],a[n]=1549556828^o[n];return r=u(i.concat(l(t)),512+8*t.length),c(u(a.concat(r),640))}(f(e),f(t))}function h(e,t,n){return t?n?_(t,e):function(e,t){return d(_(e,t))}(t,e):n?p(e):function(e){return d(p(e))}(e)}e.exports?e.exports=h:t.md5=h}(y)}),fe=function(e,t){return e===t||e!=e&&t!=t},pe=function(e,t){for(var n=e.length;n--;)if(fe(e[n][0],t))return n;return-1},_e=Array.prototype.splice;c.prototype.clear=function(){this.__data__=[],this.size=0},c.prototype.delete=function(e){var t=this.__data__,n=pe(t,e);return!(n<0||(n==t.length-1?t.pop():_e.call(t,n,1),--this.size,0))},c.prototype.get=function(e){var t=this.__data__,n=pe(t,e);return n<0?void 0:t[n][1]},c.prototype.has=function(e){return pe(this.__data__,e)>-1},c.prototype.set=function(e,t){var n=this.__data__,r=pe(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var he=c,me="object"==(void 0===y?"undefined":u(y))&&y&&y.Object===Object&&y,ve="object"==("undefined"==typeof self?"undefined":u(self))&&self&&self.Object===Object&&self,ge=me||ve||Function("return this")(),ye=ge.Symbol,we=Object.prototype,be=we.hasOwnProperty,ke=we.toString,Ie=ye?ye.toStringTag:void 0,Ee=Object.prototype.toString,Se=ye?ye.toStringTag:void 0,Ae=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Se&&Se in Object(e)?function(e){var t=be.call(e,Ie),n=e[Ie];try{e[Ie]=void 0;var r=!0}catch(e){}var o=ke.call(e);return r&&(t?e[Ie]=n:delete e[Ie]),o}(e):function(e){return Ee.call(e)}(e)},Oe=function(e){var t=void 0===e?"undefined":u(e);return null!=e&&("object"==t||"function"==t)},xe=function(e){if(!Oe(e))return!1;var t=Ae(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},Ce=ge["__core-js_shared__"],Pe=function(){var e=/[^.]+$/.exec(Ce&&Ce.keys&&Ce.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ne=Function.prototype.toString,je=/^\[object .+?Constructor\]$/,Me=Function.prototype,Fe=Object.prototype,Te=Me.toString,Re=Fe.hasOwnProperty,Le=RegExp("^"+Te.call(Re).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ue=function(e){return!(!Oe(e)||function(e){return!!Pe&&Pe in e}(e))&&(xe(e)?Le:je).test(function(e){if(null!=e){try{return Ne.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))},De=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Ue(n)?n:void 0},qe=De(ge,"Map"),Ge=De(Object,"create"),ze=Object.prototype.hasOwnProperty,Be=Object.prototype.hasOwnProperty;l.prototype.clear=function(){this.__data__=Ge?Ge(null):{},this.size=0},l.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},l.prototype.get=function(e){var t=this.__data__;if(Ge){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return ze.call(t,e)?t[e]:void 0},l.prototype.has=function(e){var t=this.__data__;return Ge?void 0!==t[e]:Be.call(t,e)},l.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Ge&&void 0===t?"__lodash_hash_undefined__":t,this};var Ve=l,Ke=function(e,t){var n=e.__data__;return function(e){var t=void 0===e?"undefined":u(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map};d.prototype.clear=function(){this.size=0,this.__data__={hash:new Ve,map:new(qe||he),string:new Ve}},d.prototype.delete=function(e){var t=Ke(this,e).delete(e);return this.size-=t?1:0,t},d.prototype.get=function(e){return Ke(this,e).get(e)},d.prototype.has=function(e){return Ke(this,e).has(e)},d.prototype.set=function(e,t){var n=Ke(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};var We=d;f.prototype.clear=function(){this.__data__=new he,this.size=0},f.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},f.prototype.get=function(e){return this.__data__.get(e)},f.prototype.has=function(e){return this.__data__.has(e)},f.prototype.set=function(e,t){var n=this.__data__;if(n instanceof he){var r=n.__data__;if(!qe||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new We(r)}return n.set(e,t),this.size=n.size,this};var Je=f,He=function(){try{var e=De(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Ye=function(e,t,n){"__proto__"==t&&He?He(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},$e=function(e,t,n){(void 0===n||fe(e[t],n))&&(void 0!==n||t in e)||Ye(e,t,n)},Xe=function(e,t,n){for(var r=-1,o=Object(e),i=n(e),a=i.length;a--;){var s=i[++r];if(!1===t(o[s],s,o))break}return e},Qe=e(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n?ge.Buffer:void 0,i=o?o.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=i?i(n):new e.constructor(n);return e.copy(r),r}}),Ze=ge.Uint8Array,et=function(e,t){var n=t?function(e){var t=new e.constructor(e.byteLength);return new Ze(t).set(new Ze(e)),t}(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},tt=Object.create,nt=function(){function e(){}return function(t){if(!Oe(t))return{};if(tt)return tt(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),rt=function(e,t){return function(n){return e(t(n))}},ot=rt(Object.getPrototypeOf,Object),it=Object.prototype,at=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||it)},st=function(e){return null!=e&&"object"==(void 0===e?"undefined":u(e))},ut=function(e){return st(e)&&"[object Arguments]"==Ae(e)},ct=Object.prototype,lt=ct.hasOwnProperty,dt=ct.propertyIsEnumerable,ft=ut(function(){return arguments}())?ut:function(e){return st(e)&&lt.call(e,"callee")&&!dt.call(e,"callee")},pt=Array.isArray,_t=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},ht=function(e){return null!=e&&_t(e.length)&&!xe(e)},mt=function(){return!1},vt=e(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n?ge.Buffer:void 0,i=(o?o.isBuffer:void 0)||mt;e.exports=i}),gt=Function.prototype,yt=Object.prototype,wt=gt.toString,bt=yt.hasOwnProperty,kt=wt.call(Object),It={};It["[object Float32Array]"]=It["[object Float64Array]"]=It["[object Int8Array]"]=It["[object Int16Array]"]=It["[object Int32Array]"]=It["[object Uint8Array]"]=It["[object Uint8ClampedArray]"]=It["[object Uint16Array]"]=It["[object Uint32Array]"]=!0,It["[object Arguments]"]=It["[object Array]"]=It["[object ArrayBuffer]"]=It["[object Boolean]"]=It["[object DataView]"]=It["[object Date]"]=It["[object Error]"]=It["[object Function]"]=It["[object Map]"]=It["[object Number]"]=It["[object Object]"]=It["[object RegExp]"]=It["[object Set]"]=It["[object String]"]=It["[object WeakMap]"]=!1;var Et=e(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n&&me.process,i=function(){try{return o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=i}),St=Et&&Et.isTypedArray,At=St?function(e){return function(t){return e(t)}}(St):function(e){return st(e)&&_t(e.length)&&!!It[Ae(e)]},Ot=Object.prototype.hasOwnProperty,xt=function(e,t,n){var r=e[t];Ot.call(e,t)&&fe(r,n)&&(void 0!==n||t in e)||Ye(e,t,n)},Ct=function(e,t,n,r){var o=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var s=t[i],u=r?r(n[s],e[s],s,n,e):void 0;void 0===u&&(u=e[s]),o?Ye(n,s,u):xt(n,s,u)}return n},Pt=/^(?:0|[1-9]\d*)$/,Nt=function(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||Pt.test(e))&&e>-1&&e%1==0&&e<t},jt=Object.prototype.hasOwnProperty,Mt=function(e,t){var n=pt(e),r=!n&&ft(e),o=!n&&!r&&vt(e),i=!n&&!r&&!o&&At(e),a=n||r||o||i,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],u=s.length;for(var c in e)!t&&!jt.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Nt(c,u))||s.push(c);return s},Ft=Object.prototype.hasOwnProperty,Tt=function(e){if(!Oe(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=at(e),n=[];for(var r in e)("constructor"!=r||!t&&Ft.call(e,r))&&n.push(r);return n},Rt=function(e){return ht(e)?Mt(e,!0):Tt(e)},Lt=function(e,t,n,r,o,i,a){var s=e[n],u=t[n],c=a.get(u);if(c)$e(e,n,c);else{var l=i?i(s,u,n+"",e,t,a):void 0,d=void 0===l;if(d){var f=pt(u),p=!f&&vt(u),_=!f&&!p&&At(u);l=u,f||p||_?pt(s)?l=s:function(e){return st(e)&&ht(e)}(s)?l=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(s):p?(d=!1,l=Qe(u,!0)):_?(d=!1,l=et(u,!0)):l=[]:function(e){if(!st(e)||"[object Object]"!=Ae(e))return!1;var t=ot(e);if(null===t)return!0;var n=bt.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&wt.call(n)==kt}(u)||ft(u)?(l=s,ft(s)?l=function(e){return Ct(e,Rt(e))}(s):(!Oe(s)||r&&xe(s))&&(l=function(e){return"function"!=typeof e.constructor||at(e)?{}:nt(ot(e))}(u))):d=!1}d&&(a.set(u,l),o(l,u,r,i,a),a.delete(u)),$e(e,n,l)}},Ut=function e(t,n,r,o,i){t!==n&&Xe(n,function(a,s){if(Oe(a))i||(i=new Je),Lt(t,n,s,r,e,o,i);else{var u=o?o(t[s],a,s+"",t,n,i):void 0;void 0===u&&(u=a),$e(t,s,u)}},Rt)},Dt=function(e){return e},qt=Math.max,Gt=He?function(e,t){return He(e,"toString",{configurable:!0,enumerable:!1,value:function(e){return function(){return e}}(t),writable:!0})}:Dt,zt=Date.now,Bt=function(e){var t=0,n=0;return function(){var r=zt(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Gt),Vt=function(e,t){return Bt(function(e,t,n){return t=qt(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=qt(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=r[o];return s[t]=n(a),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,s)}}(e,t,Dt),e+"")},Kt=function(e){return Vt(function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&function(e,t,n){if(!Oe(n))return!1;var r=void 0===t?"undefined":u(t);return!!("number"==r?ht(n)&&Nt(t,n.length):"string"==r&&t in n)&&fe(n[t],e)}(n[0],n[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++r<o;){var s=n[r];s&&e(t,s,r,i)}return t})},Wt=Kt(function(e,t,n){Ut(e,t,n)}),Jt=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Ht=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},Yt={encode:h,stringify:h,decode:v,parse:v},$t=function(e,t){this.url=e,this.data=t||{}};$t.prototype.send=function(e){if(window.XDomainRequest){var t=new window.XDomainRequest;t.open("POST",this.url,!0),t.onload=function(){e(200,t.responseText)},t.onerror=function(){"Request Entity Too Large"===t.responseText?e(413,t.responseText):e(500,t.responseText)},t.ontimeout=function(){},t.onprogress=function(){},t.send(Yt.stringify(this.data))}else{var n=new XMLHttpRequest;n.open("POST",this.url,!0),n.onreadystatechange=function(){4===n.readyState&&e(n.status,n.responseText)},n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.send(Yt.stringify(this.data))}};var Xt=function(){this._price=null,this._productId=null,this._quantity=1,this._revenueType=null,this._properties=null};Xt.prototype.setProductId=function(e){return"string"!==R(e)?W.error("Unsupported type for productId: "+R(e)+", expecting string"):J(e)?W.error("Invalid empty productId"):this._productId=e,this},Xt.prototype.setQuantity=function(e){return"number"!==R(e)?W.error("Unsupported type for quantity: "+R(e)+", expecting number"):this._quantity=parseInt(e),this},Xt.prototype.setPrice=function(e){return"number"!==R(e)?W.error("Unsupported type for price: "+R(e)+", expecting number"):this._price=e,this},Xt.prototype.setRevenueType=function(e){return"string"!==R(e)?W.error("Unsupported type for revenueType: "+R(e)+", expecting string"):this._revenueType=e,this},Xt.prototype.setEventProperties=function(e){return"object"!==R(e)?W.error("Unsupported type for eventProperties: "+R(e)+", expecting object"):this._properties=Q(e),this},Xt.prototype._isValidRevenue=function(){return"number"===R(this._price)||(W.error("Invalid revenue, need to set price field"),!1)},Xt.prototype._toJSONObject=function(){var e="object"===R(this._properties)?this._properties:{};return null!==this._productId&&(e[w.REVENUE_PRODUCT_ID]=this._productId),null!==this._quantity&&(e[w.REVENUE_QUANTITY]=this._quantity),null!==this._price&&(e[w.REVENUE_PRICE]=this._price),null!==this._revenueType&&(e[w.REVENUE_REVENUE_TYPE]=this._revenueType),e};var Qt=e(function(e,t){!function(n,r){var o="model",i="name",a="type",s="vendor",c="version",l="mobile",d="tablet",f={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.split(".")[0]:void 0}},p={rgx:function(){for(var e,t,n,r,o,i,a,s=0,c=arguments;s<c.length&&!i;){var l=c[s],d=c[s+1];if(void 0===e)for(r in e={},d)d.hasOwnProperty(r)&&("object"==u(o=d[r])?e[o[0]]=void 0:e[o]=void 0);for(t=n=0;t<l.length&&!i;)if(i=l[t++].exec(this.getUA()))for(r=0;r<d.length;r++)a=i[++n],"object"==u(o=d[r])&&o.length>0?2==o.length?"function"==typeof o[1]?e[o[0]]=o[1].call(this,a):e[o[0]]=o[1]:3==o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?e[o[0]]=a?a.replace(o[1],o[2]):void 0:e[o[0]]=a?o[1].call(this,a,o[2]):void 0:4==o.length&&(e[o[0]]=a?o[3].call(this,a.replace(o[1],o[2])):void 0):e[o]=a||void 0;s+=2}return e},str:function(e,t){for(var n in t)if("object"==u(t[n])&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(f.has(t[n][r],e))return"?"===n?void 0:n}else if(f.has(t[n],e))return"?"===n?void 0:n;return e}},_={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}},name:{"Opera Mobile":"Opera Mobi","IE Mobile":"IEMobile"}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},name:{"Windows Phone":"Windows Phone OS"}}}},h={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[i,c],[/(OPiOS)[\/\s]+([\w\.]+)/i],[[i,"Opera Mini"],c],[/\s(opr)\/([\w\.]+)/i],[[i,"Opera"],c],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[i,c],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[i,"IE"],c],[/(edge)\/((\d+)?[\w\.]+)/i],[i,c],[/(yabrowser)\/([\w\.]+)/i],[[i,"Yandex"],c],[/(comodo_dragon)\/([\w\.]+)/i],[[i,/_/g," "],c],[/((?:android.+)crmo|crios)\/([\w\.]+)/i,/android.+(chrome)\/([\w\.]+)\s+(?:mobile\s?safari)/i],[[i,"Chrome Mobile"],c],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[i,c],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/JUC.+(ucweb)[\/\s]?([\w\.]+)/i],[[i,"UCBrowser"],c],[/(dolfin)\/([\w\.]+)/i],[[i,"Dolphin"],c],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[c,[i,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[c,[i,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[c,[i,"Facebook"]],[/fxios\/([\w\.-]+)/i],[c,[i,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[c,[i,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[c,i],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[i,[c,p.str,_.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[i,c],[/(blackberry)\\s?\/([\w\.]+)/i],[[i,"BlackBerry"],c],[/(navigator|netscape)\/([\w\.-]+)/i],[[i,"Netscape"],c],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[i,c]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",f.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",f.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",f.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[o,s,[a,d]],[/applecoremedia\/[\w\.]+ \((ipad)/],[o,[s,"Apple"],[a,d]],[/(apple\s{0,1}tv)/i],[[o,"Apple TV"],[s,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[s,o,[a,d]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[o,[s,"Amazon"],[a,d]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[o,p.str,_.device.amazon.model],[s,"Amazon"],[a,l]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[o,s,[a,l]],[/\((ip[honed|\s\w*]+);/i],[o,[s,"Apple"],[a,l]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[s,o,[a,l]],[/\(bb10;\s(\w+)/i],[o,[s,"BlackBerry"],[a,l]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],[o,[s,"Asus"],[a,d]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[s,"Sony"],[o,"Xperia Tablet"],[a,d]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[s,"Sony"],[o,"Xperia Phone"],[a,l]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[s,o,[a,"console"]],[/android.+;\s(shield)\sbuild/i],[o,[s,"Nvidia"],[a,"console"]],[/(playstation\s[34portablevi]+)/i],[o,[s,"Sony"],[a,"console"]],[/(sprint\s(\w+))/i],[[s,p.str,_.device.sprint.vendor],[o,p.str,_.device.sprint.model],[a,l]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[s,o,[a,d]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[s,[o,/_/g," "],[a,l]],[/(nexus\s9)/i],[o,[s,"HTC"],[a,d]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[o,[s,"Microsoft"],[a,"console"]],[/(kin\.[onetw]{3})/i],[[o,/\./g," "],[s,"Microsoft"],[a,l]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s[6])/i],[o,[s,"Motorola"],[a,l]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[o,[s,"Motorola"],[a,d]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[s,"Samsung"],o,[a,d]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[s,"Samsung"],o,[a,l]],[/(samsung);smarttv/i],[s,o,[a,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[o,[s,"Sharp"],[a,"smarttv"]],[/sie-(\w+)*/i],[o,[s,"Siemens"],[a,l]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[s,"Nokia"],o,[a,l]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[o,[s,"Acer"],[a,d]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[s,"LG"],o,[a,d]],[/(lg) netcast\.tv/i],[s,o,[a,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[o,[s,"LG"],[a,l]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[o,[s,"Lenovo"],[a,d]],[/linux;.+((jolla));/i],[s,o,[a,l]],[/((pebble))app\/[\d\.]+\s/i],[s,o,[a,"wearable"]],[/android.+;\s(glass)\s\d/i],[o,[s,"Google"],[a,"wearable"]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i],[[o,/_/g," "],[s,"Xiaomi"],[a,l]],[/\s(tablet)[;\/\s]/i,/\s(mobile)[;\/\s]/i],[[a,f.lowerize],s,o]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[c,[i,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[i,c],[/rv\:([\w\.]+).*(gecko)/i],[c,i]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[i,c],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[[i,p.str,_.os.windows.name],[c,p.str,_.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[i,"Windows"],[c,p.str,_.os.windows.version]],[/\((bb)(10);/i],[[i,"BlackBerry"],c],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[i,c],[/(symbian\s?o?s?|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[i,"Symbian"],c],[/\((series40);/i],[i],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[i,"Firefox OS"],c],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[[i,"Linux"],c],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[i,"Chromium OS"],c],[/(sunos)\s?([\w\.]+\d)*/i],[[i,"Solaris"],c],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[[i,"Linux"],c],[/(iphone)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[i,"iPhone"],[c,/_/g,"."]],[/(ipad)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[i,"iPad"],[c,/_/g,"."]],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[i,"iOS"],[c,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[i,"Mac"],[c,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[i,c]]},m=function e(t,r){if(!(this instanceof e))return new e(t,r).getResult();var o=t||(n&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:""),i=r?f.extend(h,r):h;return this.getBrowser=function(){var e=p.rgx.apply(this,i.browser);return e.major=f.major(e.version),e},this.getCPU=function(){return p.rgx.apply(this,i.cpu)},this.getDevice=function(){return p.rgx.apply(this,i.device)},this.getEngine=function(){return p.rgx.apply(this,i.engine)},this.getOS=function(){return p.rgx.apply(this,i.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return o},this.setUA=function(e){return o=e,this},this};m.VERSION="0.7.10",m.BROWSER={NAME:i,MAJOR:"major",VERSION:c},m.CPU={ARCHITECTURE:"architecture"},m.DEVICE={MODEL:o,VENDOR:s,TYPE:a,CONSOLE:"console",MOBILE:l,SMARTTV:"smarttv",TABLET:d,WEARABLE:"wearable",EMBEDDED:"embedded"},m.ENGINE={NAME:i,VERSION:c},m.OS={NAME:i,VERSION:c},e.exports&&(t=e.exports=m),t.UAParser=m;var v=n.jQuery||n.Zepto;if(void 0!==v){var g=new m;v.ua=g.getResult(),v.ua.get=function(){return g.getUA()},v.ua.set=function(e){g.setUA(e);var t=g.getResult();for(var n in t)v.ua[n]=t[n]}}}("object"==("undefined"==typeof window?"undefined":u(window))?window:y)}),Zt=function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)},en={apiEndpoint:"api.amplitude.com",batchEvents:!1,cookieExpiration:3650,cookieName:"amplitude_id",deviceIdFromUrlParam:!1,domain:"",eventUploadPeriodMillis:3e4,eventUploadThreshold:30,forceHttps:!0,includeGclid:!1,includeReferrer:!1,includeUtm:!1,language:navigator&&(navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage)||void 0,logLevel:"WARN",optOut:!1,platform:"Web",savedMaxCount:1e3,saveEvents:!0,saveParamsReferrerOncePerSession:!0,sessionTimeout:18e5,trackingOptions:{city:!0,country:!0,device_model:!0,dma:!0,ip_address:!0,language:!0,os_name:!0,os_version:!0,platform:!0,region:!0,version_name:!0},unsentKey:"amplitude_unsent",unsentIdentifyKey:"amplitude_unsent_identify",uploadBatchSize:100},tn=function(e){this._instanceName=J(e)?w.DEFAULT_INSTANCE:e.toLowerCase(),this._legacyStorageSuffix=this._instanceName===w.DEFAULT_INSTANCE?"":"_"+this._instanceName,this._unsentEvents=[],this._unsentIdentifys=[],this._ua=new Qt(navigator.userAgent).getResult(),this.options=Wt({},en),this.cookieStorage=(new ce).getStorage(),this._q=[],this._sending=!1,this._updateScheduled=!1,this._eventId=0,this._identifyId=0,this._lastEventTime=null,this._newSession=!1,this._sequenceNumber=0,this._sessionId=null,this._userAgent=navigator&&navigator.userAgent||null};tn.prototype.Identify=le,tn.prototype.Revenue=Xt,tn.prototype.init=function(e,t,n,r){if("string"!==R(e)||J(e))W.error("Invalid apiKey. Please re-initialize with a valid apiKey");else try{this.options.apiKey=e,this._storageSuffix="_"+e+this._legacyStorageSuffix,nn(this.options,n),"string"===R(this.options.logLevel)&&K(this.options.logLevel);var o=dn(this);if(this._apiPropertiesTrackingOptions=Object.keys(o).length>0?{tracking_options:o}:{},this.cookieStorage.options({expirationDays:this.options.cookieExpiration,domain:this.options.domain}),this.options.domain=this.cookieStorage.options().domain,this._instanceName===w.DEFAULT_INSTANCE&&rn(this),on(this),this.options.deviceId="object"===R(n)&&"string"===R(n.deviceId)&&!J(n.deviceId)&&n.deviceId||this.options.deviceIdFromUrlParam&&this._getDeviceIdFromUrlParam(this._getUrlParams())||this.options.deviceId||Zt()+"R",this.options.userId="string"===R(t)&&!J(t)&&t||"number"===R(t)&&t.toString()||this.options.userId||null,this.options.saveEvents){this._unsentEvents=this._loadSavedUnsentEvents(this.options.unsentKey),this._unsentIdentifys=this._loadSavedUnsentEvents(this.options.unsentIdentifyKey);for(var i=0;i<this._unsentEvents.length;i++){var a=this._unsentEvents[i].event_properties,s=this._unsentEvents[i].groups;this._unsentEvents[i].event_properties=Q(a),this._unsentEvents[i].groups=$(s)}for(var u=0;u<this._unsentIdentifys.length;u++){var c=this._unsentIdentifys[u].user_properties,l=this._unsentIdentifys[u].groups;this._unsentIdentifys[u].user_properties=Q(c),this._unsentIdentifys[u].groups=$(l)}}var d=(new Date).getTime();(!this._sessionId||!this._lastEventTime||d-this._lastEventTime>this.options.sessionTimeout)&&(this._newSession=!0,this._sessionId=d,this.options.saveParamsReferrerOncePerSession&&this._trackParamsAndReferrer()),this.options.saveParamsReferrerOncePerSession||this._trackParamsAndReferrer(),this._lastEventTime=d,sn(this),this._sendEventsIfReady()}catch(e){W.error(e)}finally{"function"===R(r)&&r(this)}},tn.prototype._trackParamsAndReferrer=function(){this.options.includeUtm&&this._initUtmData(),this.options.includeReferrer&&this._saveReferrer(this._getReferrer()),this.options.includeGclid&&this._saveGclid(this._getUrlParams())};var nn=function e(t,n){if("object"===R(n)){var r=function(r){if(t.hasOwnProperty(r)){var o=n[r],i=R(t[r]);X(o,r+" option",i)&&("boolean"===i?t[r]=!!o:"string"===i&&!J(o)||"number"===i&&o>0?t[r]=o:"object"===i&&e(t[r],o))}};for(var o in n)n.hasOwnProperty(o)&&r(o)}};tn.prototype.runQueuedFunctions=function(){for(var e=0;e<this._q.length;e++){var t=this[this._q[e][0]];"function"===R(t)&&t.apply(this,this._q[e].slice(1))}this._q=[]},tn.prototype._apiKeySet=function(e){return!J(this.options.apiKey)||(W.error("Invalid apiKey. Please set a valid apiKey with init() before calling "+e),!1)},tn.prototype._loadSavedUnsentEvents=function(e){var t=this._getFromStorage(ue,e),n=this._parseSavedUnsentEventsString(t,e),r=this._getFromStorageLegacy(ue,e),o=this._parseSavedUnsentEventsString(r,e).concat(n);return this._removeFromLegacyStorage(ue,e),this._setInStorage(ue,e,JSON.stringify(o)),o},tn.prototype._removeFromLegacyStorage=function(e,t){e.removeItem(t+this._legacyStorageSuffix)},tn.prototype._parseSavedUnsentEventsString=function(e,t){if(J(e))return[];if("string"===R(e))try{var n=JSON.parse(e);if("array"===R(n))return n}catch(e){}return W.error("Unable to load "+t+" events. Restart with a new empty queue."),[]},tn.prototype.isNewSession=function(){return this._newSession},tn.prototype.getSessionId=function(){return this._sessionId},tn.prototype.nextEventId=function(){return this._eventId++,this._eventId},tn.prototype.nextIdentifyId=function(){return this._identifyId++,this._identifyId},tn.prototype.nextSequenceNumber=function(){return this._sequenceNumber++,this._sequenceNumber},tn.prototype._unsentCount=function(){return this._unsentEvents.length+this._unsentIdentifys.length},tn.prototype._sendEventsIfReady=function(e){return 0!==this._unsentCount()&&(this.options.batchEvents?this._unsentCount()>=this.options.eventUploadThreshold?(this.sendEvents(e),!0):(this._updateScheduled||(this._updateScheduled=!0,setTimeout(function(){this._updateScheduled=!1,this.sendEvents()}.bind(this),this.options.eventUploadPeriodMillis)),!1):(this.sendEvents(e),!0))},tn.prototype._getFromStorage=function(e,t){return e.getItem(t+this._storageSuffix)},tn.prototype._getFromStorageLegacy=function(e,t){return e.getItem(t+this._legacyStorageSuffix)},tn.prototype._setInStorage=function(e,t,n){e.setItem(t+this._storageSuffix,n)};var rn=function(e){var t=e.cookieStorage.get(e.options.cookieName+e._storageSuffix);if("object"!==R(t)&&(t=e.cookieStorage.get(e.options.cookieName+e._legacyStorageSuffix),!("object"===R(t)&&t.deviceId&&t.sessionId&&t.lastEventTime))){var n=function(e){var t=ue.getItem(e);return ue.removeItem(e),t},r="string"===R(e.options.apiKey)&&"_"+e.options.apiKey.slice(0,6)||"",o=n(w.DEVICE_ID+r),i=n(w.USER_ID+r),a=n(w.OPT_OUT+r);null!==a&&void 0!==a&&(a="true"===String(a));var s=parseInt(n(w.SESSION_ID)),u=parseInt(n(w.LAST_EVENT_TIME)),c=parseInt(n(w.LAST_EVENT_ID)),l=parseInt(n(w.LAST_IDENTIFY_ID)),d=parseInt(n(w.LAST_SEQUENCE_NUMBER)),f=function(e){return"object"===R(t)&&t[e]};e.options.deviceId=f("deviceId")||o,e.options.userId=f("userId")||i,e._sessionId=f("sessionId")||s||e._sessionId,e._lastEventTime=f("lastEventTime")||u||e._lastEventTime,e._eventId=f("eventId")||c||e._eventId,e._identifyId=f("identifyId")||l||e._identifyId,e._sequenceNumber=f("sequenceNumber")||d||e._sequenceNumber,e.options.optOut=a||!1,t&&void 0!==t.optOut&&null!==t.optOut&&(e.options.optOut="true"===String(t.optOut)),sn(e)}},on=function(e){var t=e.cookieStorage.get(e.options.cookieName+e._storageSuffix);if("object"===R(t))an(e,t);else{var n=e.cookieStorage.get(e.options.cookieName+e._legacyStorageSuffix);"object"===R(n)&&(e.cookieStorage.remove(e.options.cookieName+e._legacyStorageSuffix),an(e,n))}},an=function(e,t){t.deviceId&&(e.options.deviceId=t.deviceId),t.userId&&(e.options.userId=t.userId),null!==t.optOut&&void 0!==t.optOut&&(e.options.optOut=t.optOut),t.sessionId&&(e._sessionId=parseInt(t.sessionId)),t.lastEventTime&&(e._lastEventTime=parseInt(t.lastEventTime)),t.eventId&&(e._eventId=parseInt(t.eventId)),t.identifyId&&(e._identifyId=parseInt(t.identifyId)),t.sequenceNumber&&(e._sequenceNumber=parseInt(t.sequenceNumber))},sn=function(e){e.cookieStorage.set(e.options.cookieName+e._storageSuffix,{deviceId:e.options.deviceId,userId:e.options.userId,optOut:e.options.optOut,sessionId:e._sessionId,lastEventTime:e._lastEventTime,eventId:e._eventId,identifyId:e._identifyId,sequenceNumber:e._sequenceNumber})};tn.prototype._initUtmData=function(e,t){e=e||this._getUrlParams();var n=function(e,t){var n=e?"?"+e.split(".").slice(-1)[0].replace(/\|/g,"&"):"",r=function(e,t,n,r){return H(e,t)||H(n,r)},o=r("utm_source",t,"utmcsr",n),i=r("utm_medium",t,"utmcmd",n),a=r("utm_campaign",t,"utmccn",n),s=r("utm_term",t,"utmctr",n),u=r("utm_content",t,"utmcct",n),c={},l=function(e,t){J(t)||(c[e]=t)};return l("utm_source",o),l("utm_medium",i),l("utm_campaign",a),l("utm_term",s),l("utm_content",u),c}(t=t||this.cookieStorage.get("__utmz"),e);un(this,n)};var un=function(e,t){if("object"===R(t)&&0!==Object.keys(t).length){var n=new le;for(var r in t)t.hasOwnProperty(r)&&(n.setOnce("initial_"+r,t[r]),n.set(r,t[r]));e.identify(n)}};tn.prototype._getReferrer=function(){return document.referrer},tn.prototype._getUrlParams=function(){return location.search},tn.prototype._saveGclid=function(e){var t=H("gclid",e);J(t)||un(this,{gclid:t})},tn.prototype._getDeviceIdFromUrlParam=function(e){return H(w.AMP_DEVICE_ID_PARAM,e)},tn.prototype._getReferringDomain=function(e){if(J(e))return null;var t=e.split("/");return t.length>=3?t[2]:null},tn.prototype._saveReferrer=function(e){if(!J(e)){var t={referrer:e,referring_domain:this._getReferringDomain(e)};un(this,t)}},tn.prototype.saveEvents=function(){try{this._setInStorage(ue,this.options.unsentKey,JSON.stringify(this._unsentEvents))}catch(e){}try{this._setInStorage(ue,this.options.unsentIdentifyKey,JSON.stringify(this._unsentIdentifys))}catch(e){}},tn.prototype.setDomain=function(e){if(X(e,"domain","string"))try{this.cookieStorage.options({domain:e}),this.options.domain=this.cookieStorage.options().domain,on(this),sn(this)}catch(e){W.error(e)}},tn.prototype.setUserId=function(e){try{this.options.userId=void 0!==e&&null!==e&&""+e||null,sn(this)}catch(e){W.error(e)}},tn.prototype.setGroup=function(e,t){if(this._apiKeySet("setGroup()")&&X(e,"groupType","string")&&!J(e)){var n={};n[e]=t;var r=(new le).set(e,t);this._logEvent(w.IDENTIFY_EVENT,null,null,r.userPropertiesOperations,n,null,null,null)}},tn.prototype.setOptOut=function(e){if(X(e,"enable","boolean"))try{this.options.optOut=e,sn(this)}catch(e){W.error(e)}},tn.prototype.setSessionId=function(e){if(X(e,"sessionId","number"))try{this._sessionId=e,sn(this)}catch(e){W.error(e)}},tn.prototype.resetSessionId=function(){this.setSessionId((new Date).getTime())},tn.prototype.regenerateDeviceId=function(){this.setDeviceId(Zt()+"R")},tn.prototype.setDeviceId=function(e){if(X(e,"deviceId","string"))try{J(e)||(this.options.deviceId=""+e,sn(this))}catch(e){W.error(e)}},tn.prototype.setUserProperties=function(e){if(this._apiKeySet("setUserProperties()")&&X(e,"userProperties","object")){var t=Y(Q(e));if(0!==Object.keys(t).length){var n=new le;for(var r in t)t.hasOwnProperty(r)&&n.set(r,t[r]);this.identify(n)}}},tn.prototype.clearUserProperties=function(){if(this._apiKeySet("clearUserProperties()")){var e=new le;e.clearAll(),this.identify(e)}};var cn=function(e,t){for(var n=0;n<t._q.length;n++){var r=e[t._q[n][0]];"function"===R(r)&&r.apply(e,t._q[n].slice(1))}return e};tn.prototype.identify=function(e,t){if(this._apiKeySet("identify()"))if("object"===R(e)&&e.hasOwnProperty("_q")&&(e=cn(new le,e)),e instanceof le){if(Object.keys(e.userPropertiesOperations).length>0)return this._logEvent(w.IDENTIFY_EVENT,null,null,e.userPropertiesOperations,null,null,null,t);"function"===R(t)&&t(0,"No request sent",{reason:"No user property operations"})}else W.error("Invalid identify input type. Expected Identify object but saw "+R(e)),"function"===R(t)&&t(0,"No request sent",{reason:"Invalid identify input type"});else"function"===R(t)&&t(0,"No request sent",{reason:"API key is not set"})},tn.prototype.groupIdentify=function(e,t,n,r){if(this._apiKeySet("groupIdentify()"))if(X(e,"group_type","string")&&!J(e))if(null!==t&&void 0!==t)if("object"===R(n)&&n.hasOwnProperty("_q")&&(n=cn(new le,n)),n instanceof le){if(Object.keys(n.userPropertiesOperations).length>0)return this._logEvent(w.GROUP_IDENTIFY_EVENT,null,null,null,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,t),n.userPropertiesOperations,null,r);"function"===R(r)&&r(0,"No request sent",{reason:"No group property operations"})}else W.error("Invalid identify input type. Expected Identify object but saw "+R(n)),"function"===R(r)&&r(0,"No request sent",{reason:"Invalid identify input type"});else"function"===R(r)&&r(0,"No request sent",{reason:"Invalid group name"});else"function"===R(r)&&r(0,"No request sent",{reason:"Invalid group type"});else"function"===R(r)&&r(0,"No request sent",{reason:"API key is not set"})},tn.prototype.setVersionName=function(e){X(e,"versionName","string")&&(this.options.versionName=e)},tn.prototype._logEvent=function(e,t,n,r,o,i,a,s){if(on(this),e)if(this.options.optOut)"function"===R(s)&&s(0,"No request sent",{reason:"optOut is set to true"});else try{var u;u=e===w.IDENTIFY_EVENT||e===w.GROUP_IDENTIFY_EVENT?this.nextIdentifyId():this.nextEventId();var c=this.nextSequenceNumber(),l="number"===R(a)?a:(new Date).getTime();(!this._sessionId||!this._lastEventTime||l-this._lastEventTime>this.options.sessionTimeout)&&(this._sessionId=l),this._lastEventTime=l,sn(this),r=r||{};var d=Wt({},this._apiPropertiesTrackingOptions);n=Wt(d,n||{}),t=t||{},o=o||{},i=i||{};var f={device_id:this.options.deviceId,user_id:this.options.userId,timestamp:l,event_id:u,session_id:this._sessionId||-1,event_type:e,version_name:ln(this,"version_name")&&this.options.versionName||null,platform:ln(this,"platform")?this.options.platform:null,os_name:ln(this,"os_name")&&this._ua.browser.name||null,os_version:ln(this,"os_version")&&this._ua.browser.major||null,device_model:ln(this,"device_model")&&this._ua.os.name||null,language:ln(this,"language")?this.options.language:null,api_properties:n,event_properties:Y(Q(t)),user_properties:Y(Q(r)),uuid:Zt(),library:{name:"amplitude-js",version:"4.5.2"},sequence_number:c,groups:Y($(o)),group_properties:Y(Q(i)),user_agent:this._userAgent};return e===w.IDENTIFY_EVENT||e===w.GROUP_IDENTIFY_EVENT?(this._unsentIdentifys.push(f),this._limitEventsQueued(this._unsentIdentifys)):(this._unsentEvents.push(f),this._limitEventsQueued(this._unsentEvents)),this.options.saveEvents&&this.saveEvents(),this._sendEventsIfReady(s)||"function"!==R(s)||s(0,"No request sent",{reason:"No events to send or upload queued"}),u}catch(e){W.error(e)}else"function"===R(s)&&s(0,"No request sent",{reason:"Missing eventType"})};var ln=function(e,t){return!!e.options.trackingOptions[t]},dn=function(e){for(var t=["city","country","dma","ip_address","region"],n={},r=0;r<t.length;r++){var o=t[r];ln(e,o)||(n[o]=!1)}return n};tn.prototype._limitEventsQueued=function(e){e.length>this.options.savedMaxCount&&e.splice(0,e.length-this.options.savedMaxCount)},tn.prototype.logEvent=function(e,t,n){return this.logEventWithTimestamp(e,t,null,n)},tn.prototype.logEventWithTimestamp=function(e,t,n,r){return this._apiKeySet("logEvent()")?X(e,"eventType","string")?J(e)?("function"===R(r)&&r(0,"No request sent",{reason:"Missing eventType"}),-1):this._logEvent(e,t,null,null,null,null,n,r):("function"===R(r)&&r(0,"No request sent",{reason:"Invalid type for eventType"}),-1):("function"===R(r)&&r(0,"No request sent",{reason:"API key not set"}),-1)},tn.prototype.logEventWithGroups=function(e,t,n,r){return this._apiKeySet("logEventWithGroups()")?X(e,"eventType","string")?this._logEvent(e,t,null,null,n,null,null,r):("function"===R(r)&&r(0,"No request sent",{reason:"Invalid type for eventType"}),-1):("function"===R(r)&&r(0,"No request sent",{reason:"API key not set"}),-1)};var fn=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};tn.prototype.logRevenueV2=function(e){if(this._apiKeySet("logRevenueV2()"))if("object"===R(e)&&e.hasOwnProperty("_q")&&(e=cn(new Xt,e)),e instanceof Xt){if(e&&e._isValidRevenue())return this.logEvent(w.REVENUE_EVENT,e._toJSONObject())}else W.error("Invalid revenue input type. Expected Revenue object but saw "+R(e))},tn.prototype.logRevenue=function(e,t,n){return this._apiKeySet("logRevenue()")&&fn(e)&&(void 0===t||fn(t))?this._logEvent(w.REVENUE_EVENT,{},{productId:n,special:"revenue_amount",quantity:t||1,price:e},null,null,null,null,null):-1},tn.prototype.removeEvents=function(e,t){pn(this,"_unsentEvents",e),pn(this,"_unsentIdentifys",t)};var pn=function(e,t,n){if(!(n<0)){for(var r=[],o=0;o<e[t].length;o++)e[t][o].event_id>n&&r.push(e[t][o]);e[t]=r}};tn.prototype.sendEvents=function(e){if(this._apiKeySet("sendEvents()"))if(this.options.optOut)"function"===R(e)&&e(0,"No request sent",{reason:"optOut is set to true"});else if(0!==this._unsentCount())if(this._sending)"function"===R(e)&&e(0,"No request sent",{reason:"Request already in progress"});else{this._sending=!0;var t=(this.options.forceHttps?"https":"https:"===window.location.protocol?"https":"http")+"://"+this.options.apiEndpoint+"/",n=Math.min(this._unsentCount(),this.options.uploadBatchSize),r=this._mergeEventsAndIdentifys(n),o=r.maxEventId,i=r.maxIdentifyId,a=JSON.stringify(r.eventsToSend),s=(new Date).getTime(),u={client:this.options.apiKey,e:a,v:w.API_VERSION,upload_time:s,checksum:de(w.API_VERSION+this.options.apiKey+a+s)},c=this;new $t(t,u).send(function(t,r){c._sending=!1;try{200===t&&"success"===r?(c.removeEvents(o,i),c.options.saveEvents&&c.saveEvents(),c._sendEventsIfReady(e)||"function"!==R(e)||e(t,r)):413===t?(1===c.options.uploadBatchSize&&c.removeEvents(o,i),c.options.uploadBatchSize=Math.ceil(n/2),c.sendEvents(e)):"function"===R(e)&&e(t,r)}catch(e){}})}else"function"===R(e)&&e(0,"No request sent",{reason:"No events to send"});else"function"===R(e)&&e(0,"No request sent",{reason:"API key not set"})},tn.prototype._mergeEventsAndIdentifys=function(e){for(var t=[],n=0,r=-1,o=0,i=-1;t.length<e;){var a,s=o>=this._unsentIdentifys.length,u=n>=this._unsentEvents.length;if(u&&s){W.error("Merging Events and Identifys, less events and identifys than expected");break}s?r=(a=this._unsentEvents[n++]).event_id:u?i=(a=this._unsentIdentifys[o++]).event_id:!("sequence_number"in this._unsentEvents[n])||this._unsentEvents[n].sequence_number<this._unsentIdentifys[o].sequence_number?r=(a=this._unsentEvents[n++]).event_id:i=(a=this._unsentIdentifys[o++]).event_id,t.push(a)}return{eventsToSend:t,maxEventId:r,maxIdentifyId:i}},tn.prototype.setGlobalUserProperties=function(e){this.setUserProperties(e)},tn.prototype.__VERSION__="4.5.2";var _n=rt(Object.keys,Object),hn=Object.prototype.hasOwnProperty,mn=function(e){return ht(e)?Mt(e):function(e){if(!at(e))return _n(e);var t=[];for(var n in Object(e))hn.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)},vn=Object.prototype.hasOwnProperty,gn=Kt(function(e,t){if(at(t)||ht(t))Ct(t,mn(t),e);else for(var n in t)vn.call(t,n)&&xt(e,n,t[n])}),yn=function(){this.options=gn({},en),this._q=[],this._instances={}};yn.prototype.Identify=le,yn.prototype.Revenue=Xt,yn.prototype.getInstance=function(e){e=J(e)?w.DEFAULT_INSTANCE:e.toLowerCase();var t=this._instances[e];return void 0===t&&(t=new tn(e),this._instances[e]=t),t},yn.prototype.init=function(e,t,n,r){this.getInstance().init(e,t,n,function(e){this.options=e.options,"function"===R(r)&&r(e)}.bind(this))},yn.prototype.runQueuedFunctions=function(){for(var e=0;e<this._q.length;e++){var t=this[this._q[e][0]];"function"===R(t)&&t.apply(this,this._q[e].slice(1))}for(var n in this._q=[],this._instances)this._instances.hasOwnProperty(n)&&this._instances[n].runQueuedFunctions()},yn.prototype.isNewSession=function(){return this.getInstance().isNewSession()},yn.prototype.getSessionId=function(){return this.getInstance().getSessionId()},yn.prototype.nextEventId=function(){return this.getInstance().nextEventId()},yn.prototype.nextIdentifyId=function(){return this.getInstance().nextIdentifyId()},yn.prototype.nextSequenceNumber=function(){return this.getInstance().nextSequenceNumber()},yn.prototype.saveEvents=function(){this.getInstance().saveEvents()},yn.prototype.setDomain=function(e){this.getInstance().setDomain(e)},yn.prototype.setUserId=function(e){this.getInstance().setUserId(e)},yn.prototype.setGroup=function(e,t){this.getInstance().setGroup(e,t)},yn.prototype.setOptOut=function(e){this.getInstance().setOptOut(e)},yn.prototype.regenerateDeviceId=function(){this.getInstance().regenerateDeviceId()},yn.prototype.setDeviceId=function(e){this.getInstance().setDeviceId(e)},yn.prototype.setUserProperties=function(e){this.getInstance().setUserProperties(e)},yn.prototype.clearUserProperties=function(){this.getInstance().clearUserProperties()},yn.prototype.identify=function(e,t){this.getInstance().identify(e,t)},yn.prototype.setVersionName=function(e){this.getInstance().setVersionName(e)},yn.prototype.logEvent=function(e,t,n){return this.getInstance().logEvent(e,t,n)},yn.prototype.logEventWithGroups=function(e,t,n,r){return this.getInstance().logEventWithGroups(e,t,n,r)},yn.prototype.logRevenueV2=function(e){return this.getInstance().logRevenueV2(e)},yn.prototype.logRevenue=function(e,t,n){return this.getInstance().logRevenue(e,t,n)},yn.prototype.removeEvents=function(e,t){this.getInstance().removeEvents(e,t)},yn.prototype.sendEvents=function(e){this.getInstance().sendEvents(e)},yn.prototype.setGlobalUserProperties=function(e){this.getInstance().setUserProperties(e)},yn.prototype.__VERSION__="4.5.2";var wn=window.amplitude||{},bn=new yn;for(var kn in bn._q=wn._q||[],wn._iq)wn._iq.hasOwnProperty(kn)&&(bn.getInstance(kn)._q=wn._iq[kn]._q||[]);return bn})}).call(this,n(61),n(373),n(147).Buffer)},379:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=function(e){i=e,window.fbq?a=window.fbq:(a=window.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},window._fbq||(window._fbq=a,a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],r.load_script("https://connect.facebook.net/en_US/fbevents.js").catch(function(e){console.error("Failed to load Facebook Pixel",e),a=window.fbq=function(){}})),a("init",o.fbpixel.id),a("track","PageView"));i.expose({fbpixel_send_event:function(e,t){u(e,t)}})},t.send_event=u;var r=n(10),o=(n(11),n(35),n(12)),i=void 0,a=void 0,s={Purchase:!0,AdImpression:!0,AdClick:!0,fb_mobile_level_achieved:!0,fb_mobile_spent_credits:!0,fb_mobile_tutorial_completion:!0,fb_mobile_complete_registration:!0};function u(e,t){a(e in s?"track":"trackCustom",e,t)}},381:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=function(e){var t=e.external_api;function n(){return new Promise(function(e,t){plingaRpc.getUser(function(t){console.log("gd user data",t),e(t)})})}s.resolve(async function(){await o.load_script("https://s3.amazonaws.com/imgs3.plinga.de/general/easyXDM.min.js"),await o.load_script("https://s3.amazonaws.com/imgs3.plinga.de/plingaRpc/gd_plingaRpc.js");var e=await new Promise(function(e){plingaRpc.init(e)});console.log("gd iap init result:",e),console.log("gd iap sdk sucessfully initialized")}()),s.catch(function(e){console.error("Failed to load gd iap sdk",e)}),t.expose({gd_query_auth:async function(){return await s,await n()},gd_query_products:async function(){return i.gd_products},gd_purchase:async function(e){return await s,await async function(){var e=await n();if(e.is_guest){var t=await new Promise(function(e,t){plingaRpc.loginUser(function(t){console.log("login result",t),e(t)},function(){e(n())})});return t.is_guest?await Promise.reject("not logged in"):e}return e}(),await new Promise(function(t,n){plingaRpc.initPayment(e,function(e){console.log("payment results",e),t(e)})})}});var r={prepare_ad:async function(e){return{status:"success"}},show_ad:async function(e,t){await s;var n=!1;try{n=await function(e,t){l&&l.reject("failed");l=o.MyPromise.future(),u=t.on_opened;var n=l;function r(){l==n&&(u=null,l=null)}function i(){n.resolve(!0)}function a(e){n.reject(e||"ad error")}c=!1,o.MyPromise.delay(15).then(function(){c||n.resolve(!1)}),l.then(r,r),"rewarded"===e?(console.log("Show rewarded ad"),plingaRpc.requestRewardedAdvertisement(i,a)):(console.log("Show interstitial ad"),plingaRpc.requestAdvertisement(i,a));return l}(e,t)}catch(e){console.error("gd-plinga requestAdvertisement failed: ",e)}return!n&&"rewarded"===e&&a?await async function(e){return await new Promise(function(t,n){e.on_opened(),setTimeout(function(){t({status:"success",source:"html fake ad"})},15e3)})}(t):{status:"success",source:"gd-plinga primary rewarded"}}};return{get_ads_provider:function(){return r}}};n(11);var r=n(12),o=(n(50),n(10)),i=n(35),a=(o.MyPromise.future(),r.adRewardGDURL[0]),s=o.MyPromise.future();var u=null,c=!1,l=null;window.plingaRpc_pauseGame=function(){if(console.warn("should pause the game"),c=!0,u){var e=u;u=null,e()}},window.plingaRpc_resumeGame=function(){console.warn("should unpause the game")}},382:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=function(e){var t=window.location.origin;t==r.poki["app-origin"]?v():t==r["app-origin"]||v();s.then(function(){!function(){u=!0,null!==c&&PokiSDK.gameLoadingStart();"number"==typeof c&&PokiSDK.gameLoadingProgress({percentageDone:c});"done"===c&&PokiSDK.gameLoadingFinished()}()},function(e){console.error("poki init error: %s",e)}),o.load_script("https://game-cdn.poki.com/scripts/v2/poki-sdk.js").then(function(){s.resolve(PokiSDK.init()),(i.getItem("developer")||r.debug)&&PokiSDK.setDebug(!0)});var n={prepare_ad:async function(){try{return await s,{status:"success"}}catch(e){return{status:"failed-blocked",error:e?e.toString():""+e}}},show_ad:async function(e,t){await s;try{return l=!0,g(),"undefined"==typeof PokiSDK||"undefined"===PokiSDK.commercialBreak?{status:"failed",error:"PokiSDK error"}:("rewarded"==e?await PokiSDK.rewardedBreak():await PokiSDK.commercialBreak().then(function(){return!0}))?{status:"success",source:"poki"}:{status:"failed",error:"poki ad failed"}}finally{l=!1,g()}}};return{get_ads_provider:function(){return n},on_loading_start:function(){c="start",u&&PokiSDK.gameLoadingStart()},on_loading_finish:function(){c="complete",u&&PokiSDK.gameLoadingFinished()},on_loading_progress:function(e){"complete"!==c&&(c=e,u&&PokiSDK.gameLoadingProgress({percentageDone:e}))},happy_time:function(e){u&&PokiSDK.happyTime(e)},set_playing:function(e){d=e,g()}}};n(11);var r=n(12),o=n(10),i=n(49),a=n(77),s=o.MyPromise.future(),u=!1,c=null,l=!1,d=!1,f=!1;var p=void 0,_=o.MyPromise.future();function h(e,t){switch(e){case"irpc::connected":p=t.connection,_.resolve(p),console.log("got irpc connection");break;default:console.error("invalid rpc method '"+e+"'")}}async function m(e,t){return await o.MyPromise.with_timeout(_,5,function(){return Promise.reject("irpc timeout")}),await p.invoke(e,t).then(function(n){return console.log(e,t,"ok",n),n},function(n){return console.log(e,t,"err",n),Promise.reject(n)})}function v(){var e=document.createElement("iframe");e.src=r.poki["bounce-iframe"],document.body.appendChild(e),a.connect(window,e.contentWindow,h,{}),window.poki_storage_set=function(e,t){return m("storage_set",{key:e,data:t})},window.poki_storage_get=function(e){return m("storage_get",{key:e})}}function g(){if(u){var e=d&&!l;e!=f&&(f=e,e?PokiSDK.gameplayStart():PokiSDK.gameplayStop())}}},383:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.call=function(e,t){return new Promise(function(n){return n(function(e,t){switch(e){case"init":return function(){if(y)return;y=!0;var e=navigator.userAgent.toLowerCase().indexOf("android")>=0;if(e){var t=function(){d.style.display="block"},n=function(){d.style.display="none"},i=function(){var e=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;document.fullscreenElement&&(e=!0),e?n():t()},c=function(){n(),a()},l=document.getElementById("yandex-wrapper"),d=document.createElement("div"),f=l.nextSibling;f?l.parentElement.insertBefore(d,f):l.parentElement.appendChild(d),d.className="fullscreenintercept",a=function(){try{var e=document.documentElement,t=null;o&&o.screen&&o.screen.fullscreen&&o.screen.fullscreen.request?t=o.screen.fullscreen.request():e.requestFullscreen?t=e.requestFullscreen():e.mozRequestFullScreen?t=e.mozRequestFullScreen():e.webkitRequestFullscreen?t=e.webkitRequestFullscreen():e.msRequestFullscreen&&(t=e.msRequestFullscreen()),t&&t.catch(function(){})}catch(e){}},n(),d.addEventListener("click",c),d.addEventListener("touchend",c),document.addEventListener("visibilitychange",function(){document.hidden?t():i()}),document.addEventListener("fullscreenchange",function(){i()}),i(),a()}r=new Promise(function(e,t){var n=document.createElement("script");n.type="text/javascript",n.src="https://yandex.ru/games/sdk/v2",n.onload=function(){e(!0)},n.addEventListener("error",function(e){t("yandex script loading failed"),e.stopPropagation(),e.preventDefault()}),n.async=!0,document.body.appendChild(n)}).then(function(){return new Promise(function(t,n){YaGames.init({screen:{fullscreen:e},adv:{onAdvClose:function(e){console.info("adv closed")}}}).then(function(e){o=e,g(),t(e),a&&a(),h(e).catch(function(e){return console.warn("automatic login failed",e)})})})}),(u=r.then(function(e){return e.getStorage()})).catch(function(e){return console.warn("Failed to get safeStorage",e)},null);var p=!1,_="yandex_context_callbacks";window[_]=window[_]||[],window[_].push(function(){console.log("Yandex ad sdk ready!"),p=!0});var m=document.createElement("script");m.type="text/javascript",m.src="https://an.yandex.ru/system/context.js",m.async=!0,document.body.appendChild(m);var v=void 0;function w(e,t,n){var r=document.createElement(t);return e.appendChild(r),n&&(r.id=n),r}var b=w(document.getElementById("yandex-wrapper"),"div","yandex_fullscreen");b.style.display="none";var k=w(b,"div","yandex_wrap"),I=w(k,"div","yandex_container"),E=w(k,"div","yandex_skip_wrapper"),S=w(E,"div","yandex_timer"),A=w(E,"div","yandex_skip");A.innerText="Пропустить рекламу",A.addEventListener("click",function(){if(v){var e=v;v=null,e()}}),A.style.display="none",s=function(e,t){return new Promise(function(n,r){if(p)try{var o=function(){u&&(clearInterval(u),u=0)},i=function(){s||(o(),I.removeChild(a),b.style.display="none",s=!0)};b.style.display="block";var a=document.createElement("div");a.setAttribute("id","yandex_rtb_block"),a.classList.add("yandex-block"),I.appendChild(a);var s=!1,u=0;Ya.Context.AdvManager.render({blockId:e||window["pecpoc.com/ad"].reward_id,renderTo:"yandex_rtb_block",async:!0,type:"fullscreen",onRender:function(e){console.log("Ad rendered",e),A.style.display="none",t&&t(),function(){S.style.display="block",A.style.display="none",S.innerText="";var e=6;function t(){0===--e?(o(),S.style.display="none",A.style.display="block"):S.innerText="До получения награды: "+e}v=function(){i(),n(!0)},t(),u=setInterval(t,1e3)}()}},function(){console.log("Ad not rendered"),i(),n(!1)})}catch(e){throw cleanup(),e}else r("no ad sdk")})}}(),r.then(function(e){return{native_cache:e.yandexApp&&e.yandexApp.enabled}});case"get_player":return r.then(h);case"login_player":return r.then(m);case"show_ad":return t&&"yarewarded"===t.type?r.then(function(e){return e?v?Promise.resolve(!1):(v=!0,new Promise(function(t,n){var r=!1,o=!1;e.adv.showRewardedVideo({callbacks:{onRewarded:function(){r=!0},onOpen:function(){o=!0},onClose:function(){v=!1,o||rewarded?t({opened:o,rewarded:r}):t(!1)},onError:function(e){console.warn("Error: %s",e),t(!1)}}})})):Promise.reject("no ysdk")}):t&&("rewarded"===t.type||t.ad_id)?s(t.ad_id):r.then(function(e){return e?v?Promise.resolve(!1):(v=!0,new Promise(function(t,n){var r=!1;e.adv.showFullscreenAdv({callbacks:{onOpen:function(){r=!0},onClose:function(){v=!1,t(r)},onError:function(e){console.warn("Error: %s",e),t(!1)}}})})):Promise.reject("no ysdk")});case"get_purchases":return i.then(function(e){return e.getPurchases().then(function(e){return e.map(f)})});case"get_products":return i.then(function(e){return e.getCatalog().then(function(e){return e.map(p)})});case"purchase":return i.then(function(e){return e.purchase(t.product_id).then(function(e){return f(e)},function(e){return Promise.reject(_(e))})});case"consume_purchase":return i.then(function(e){return e.consumePurchase(t.purchase_id)});case"reload":return location.reload(),!0;case"safestorage_get":var n=t.key;return u.then(function(e){return e.getItem(n)});case"safestorage_set":var c=t.key,l=t.value;return u.then(function(e){return e.setItem(c,l)});case"can_review":return r.then(function(e){return e.feedback.canReview()}).catch(function(e){return Promise.reject(_(e))});case"open_review":return r.then(function(e){return e.feedback.requestReview()}).catch(function(e){return Promise.reject(_(e))});case"can_show_shortcut_prompt":return r.then(function(e){return e.shortcut.canShowPrompt()}).catch(function(e){return Promise.reject(_(e))});case"show_shortcut_prompt":return r.then(function(e){return e.shortcut.showPrompt()}).catch(function(e){return Promise.reject(_(e))});case"loading_complete":return r.then(function(e){var t=e.features.LoadingAPI;t&&t.ready()}).catch(function(e){return Promise.reject(_(e))});case"show_banner":return r.then(function(e){return e.adv.showBannerAdv()}).catch(function(e){return Promise.reject(_(e))});case"hide_banner":return r.then(function(e){return e.adv.hideBannerAdv()}).catch(function(e){return Promise.reject(_(e))});case"get_banner_status":return r.then(function(e){return e.adv.getBannerAdvStatus()}).catch(function(e){return Promise.reject(_(e))});case"achievement.getProgress":return r.then(function(e){return e.achievements.getProgress(t.id)}).catch(function(e){return Promise.reject(_(e))});case"achievement.setProgress":return r.then(function(e){return e.achievements.setProgress(t.id,t.progress)}).catch(function(e){return Promise.reject(_(e))});default:throw new Error("no such method '"+e+"'")}}(e,t))})};var r=void 0,o=void 0,i=void 0,a=void 0,s=void 0,u=void 0,c=["id","price","priceCurrencyCode"],l=["productID","purchaseToken","signature"];function d(e,t){var n={};for(var r in t){var o=t[r];n[o]=e[o]}return n}function f(e){return d(e,l)}function p(e){return d(e,c)}function _(e){return e.code&&e.message?e.code+": "+e.message:e}function h(e){return e.getPlayer({signed:!0}).then(function(t){return(i=function(e){return e.getPayments({signed:!0})}(e)).catch(function(e){console.warn("payments not available: "+e)}),function(e){return function(e){try{return e.getIDsPerGame().then(function(e){var t={};console.log("IDs per game:",e);for(var n=0;n<e.length;n++){var r=e[n];t[""+r.appID]={user_id:r.userID}}return t}).catch(function(e){return console.warn("IDs per game not available:",e),null})}catch(e){return console.warn("IDs per game not available:",e),Promise.resolve(null)}}(e).then(function(t){var n=e.getUniqueID();return{id:n,user_id:e.getID(),unique_id:n,name:e.getName(),photo_small:e.getPhoto("small"),photo_medium:e.getPhoto("medium"),photo_large:e.getPhoto("large"),signature:e.signature,extra_ids:t,lite:"lite"===e.getMode()}})}(t)},function(e){return(i=Promise.reject("unathorized")).catch(function(){}),Promise.reject(_(e))})}function m(e){function t(){return e.auth.openAuthDialog().then(function(){return g(),h(e).then(function(e){return e&&e.lite?Promise.reject("auth with lite user"):e})},function(e){return Promise.reject(_(e))})}return h(e).then(function(e){return e&&e.lite?t():e},function(e){return t()})}var v=!1;function g(){new Promise(function(e,t){e(o.notifications.allow())}).then(function(){console.log("Notifications enabled")},function(e){console.warn("Can't enable notifications",e)})}var y=!1},384:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=function(e){l=e.external_api;var t=new URLSearchParams(window.location.search),n=t.get("vid"),v=t.get("sig"),g=t.get("view"),y=t.get("session_key"),w=window.location.search;"?"===w[0]&&(w=w.substr(1));d="app_mobile"===g,u={user_id:n,sig:v,session_key:y},async function(){return await r.load_script("https://connect.mail.ru/js/loader.js"),s.resolve(new Promise(function(e,t){mailru.loader.require("api",function(){mailru.app.init(a.private),e(!0)})})),await s,mailru.events.listen(mailru.app.events.paymentDialogStatus,function(e){h&&(h.resolve(e),h=null)}),mailru.events.listen(mailru.app.events.incomingPayment,function(e){_&&(_.resolve(e),_=null)}),c.resolve(p("common.users.getInfo",u.user_id).then(function(e){return 0==e.length?Promise.reject("no profile returned"):e[0]})),!0}().then(function(){console.log("MY init completed")},function(e){c.reject("no my authorization"),console.error("MY init failed",e)}),l.expose({my_get_auth:function(){return u},my_query_profile:async function(){var e=await c;return{user_id:n,auth_params:w,auth_sig:v,name:e.first_name,photo:e.pic}},my_query_friends:async function(){return p("common.friends.getAppUsers").then(function(e){var t=[];for(var n in e)t.push(e[n]);return console.log("User friends: %s",JSON.stringify(t)),t})},my_query_products:async function(){return o.my_products},my_purchase:async function(e){return await s,await async function(e){var t=function(e){for(var t in o.my_products){var n=o.my_products[t];if(n.offer_id===e)return n}return null}(e);if(d)return await async function(e){var t={appid:a["app-id"],session_key:u.session_key,service_id:e.service_id,service_name:e.title,mailiki_price:e.price_mailiki,mob:1};return window.open(i+"?"+m(t),"_blank").focus(),await r.MyPromise.delay(10)}(t);_=r.MyPromise.future(),mailru.app.payments.showDialog({service_id:t.service_id,service_name:t.title,mailiki_price:t.price_mailiki});var n=await _;return console.log("Payment result:",n),"success"==n.status||Promise.reject("purchase failed")}(e)},my_invite_friends:async function(){return d?null:(await s,mailru.app.friends.invite({text:"Попробуй Скайдом! Ооооочень рекомендую! На некоторых уровнях, правда, слишком хитрые головоломки, не все могут пройти..."}),null)},my_make_post:async function(e){var t=f[e];if(!t)throw new Error("unknown post id");return await s,mailru.common.stream.post(t.desktop),null}});var b={prepare_ad:async function(){return{status:"success"}},show_ad:function(e,t){return"interstitial"===e||"preroll"===e?Promise.resolve({status:"failed",source:"ok interstitial",reason:"no ad"}):async function(e,t){return await new Promise(function(t,n){e.on_opened(),setTimeout(function(){t({status:"success",source:"html fake ad"})},1e4)})}(t)}};return{get_ads_provider:function(){return b}}};n(11),n(12),n(50);var r=n(10),o=n(35),i=(n(48),n(385),"https://m.my.mail.ru/cgi-bin/app/paymentm"),a=MA_CONFIG.my_app,s=r.MyPromise.future(),u=null,c=r.MyPromise.future(),l=(!a||a["test-mode"],void 0),d=void 0,f={dc_win:{desktop:{title:"Я №1 в Турнире!",text:"😃 Ихаааа! Корона Турнира Моя!!! Присоединяйся! 🎮🎯🕹️",img_url:"https://sun9-19.userapi.com/1pF-jQDMj40bCazaOfgEXpAFp0NdqZqstpu6oA/lnyR7A87xhg.jpg",action_links:[{text:"Попробуй красивейшую Три в Ряд!",href:"dc_win"}]},mobile:{title:"Я №1 в Турнире!",text:"😃 Ихаааа! Корона Турнира Моя!!! Присоединяйся! 🎮🎯🕹️",img_url:"https://sun9-19.userapi.com/1pF-jQDMj40bCazaOfgEXpAFp0NdqZqstpu6oA/lnyR7A87xhg.jpg",link1_text:"Попробуй красивейшую Три в Ряд!",link1_href:"dc_win"}}};async function p(e){await s;for(var t=mailru,n=e.split("."),r=n.length-1,o=0;o<r;o++)t=t[n[o]];for(var i=n[r],a=[null],u=1;u<arguments.length;u++)a.push(arguments[u]);return await new Promise(function(e,n){a[0]=function(t){if(t.error)return Promise.reject(t.error);arguments.length>1?e(Array.prototype.slice.call(arguments)):e(t)},t[i].apply(t,a)})}var _=void 0,h=void 0;function m(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}},387:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=function(e){function t(){return f&&f.reject("overwritten"),f=r.MyPromise.future()}o.then(function(){!function(){s=!0,null!==u&&i.sdkGameLoadingStart();"done"===u&&i.sdkGameLoadingStop()}()},function(e){console.error("crazygames init error: %s",e)}),r.load_script("https://sdk.crazygames.com/crazygames-sdk-v1.js").then(function(){(i=window.CrazyGames.CrazySDK.getInstance()).addEventListener("adblockDetectionExecuted",function(){a=!0}),i.addEventListener("adStarted",function(){}),i.addEventListener("adError",function(e){console.log("AD ERROR",e.toString()),f&&(a?f.reject(e):f.resolve(!1),f=null)}),i.addEventListener("adFinished",function(e){console.log("AD FINISHED",e.toString()),f&&(f.resolve(!0),f=null)}),o.resolve(i.init())});var n={prepare_ad:async function(){try{return await o,{status:"success"}}catch(e){return{status:"failed-blocked",error:e?e.toString():""+e}}},show_ad:async function(e,n){await o;try{return c=!0,p(),void 0===i||"undefined"===i.requestAd?{status:"failed",error:"CrazyGames sdk error"}:("rewarded"==e?await function(){var e=t();return i.requestAd("rewarded"),e}():await function(){var e=t();return i.requestAd("midgame"),e}())?{status:"success",source:"crazygames"}:{status:"failed",error:"crazygames ad failed"}}finally{c=!1,p()}}};return{get_ads_provider:function(){return n},on_loading_start:function(){u="start",s&&i.sdkGameLoadingStart()},on_loading_finish:function(){u="complete",s&&i.sdkGameLoadingStop()},on_loading_progress:function(e){"complete"!==u&&(u=e)},happy_time:function(e){s&&i.happytime()},set_playing:function(e){l=e,p()}}};n(11),n(12);var r=n(10),o=(n(49),n(77),r.MyPromise.future()),i=void 0,a=!1,s=!1,u=null,c=!1,l=!1,d=!1,f=null;function p(){if(s){var e=l&&!c;e!=d&&(d=e,e?i.gameplayStart():i.gameplayStop())}}},388:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=function(e){h=e.external_api;var t=new URLSearchParams(window.location.search),n=t.get("viewer_id"),v=t.get("api_id"),S=t.get("auth_key"),A=t.get("access_token");_=t.get("platform"),c={viewer_id:n,api_id:v,auth_key:S,access_token:A},async function(){return i.subscribe(function(e){"VKWebAppShowRequestBoxResult"!==e.type||m||h.invoke("vk_update_purchases")}),u=s.get_app(),p=!!u["test-mode"],l.resolve(async function(){i.send("VKWebAppInit",{});try{var e=await i.sendPromise("VKWebAppGetAuthToken",{app_id:Number(u["app-id"]),scope:""});c.access_token=e.access_token,console.log("Auth token updated!")}catch(e){console.error("Auth token request failed",e)}d.resolve(Promise.race([r.MyPromise.delay(15).then(function(){return Promise.reject("timeout")}),g("users.get",{user_ids:c.viewer_id,fields:"photo_200"}).then(function(e){return 1!==e.length?Promise.reject("invalid user response"):e[0]})]))}()),await l}().then(function(){console.log("VK init completed");try{i.send("VKWebAppGetClientVersion").then(function(e){console.log("VK app version:",JSON.stringify(e))},function(e){console.log("VK app version query failed!",e)})}catch(e){console.log("VK app version query failed!",e)}},function(e){d.reject("no vk authorization"),console.error("VK init failed",e)}),async function(){return f.resolve(async function(){await l,await r.load_script("https://vk.com/js/api/mobile_sdk.js"),await r.load_script("https://ad.mail.ru/static/admanhtml/rbadman-html5.min.js"),await r.load_script("https://vk.com/js/api/adman_init.js")}()),await f,!0}().then(function(){console.log("VK ad sdk init completed")},function(e){console.error("VK ad sdk init failed",e)}),h.expose({vk_get_auth:function(){return c},vk_query_profile:async function(){try{console.log("VK query profile begin");var e=await d;console.log("VK query profile completed");var t=await async function(){if(!i.supports("VKWebAppCheckAllowedScopes"))return console.log("Permission check unsupported"),I;try{for(var e=await i.sendPromise("VKWebAppCheckAllowedScopes",{scopes:k}),t={},n=e.result,r=0;r<n.length;r++){var o=n[r].scope;o in w&&(t[w[o]]=n[r].allowed)}return t}catch(e){return console.log(e),{}}}();return console.log("VK query permissions completed"),{user_id:c.viewer_id,app_id:c.api_id,auth_key:c.auth_key,name:e.first_name,photo:e.photo_200,permissions:t}}catch(e){throw console.warn("VK query profile error:",e),e}},vk_query_friends:async function(){return await g("friends.getAppUsers",{}).then(function(e){var t=[];for(var n in e)t.push(String(e[n]));return console.log("User friends: %s",JSON.stringify(t)),t})},vk_query_products:async function(){return o.vk_products},vk_purchase:async function(e){await l;var t={type:"item",item:e};m=!0;var n=await i.sendPromise("VKWebAppShowOrderBox",t);return setTimeout(function(){m=!1},0),console.log("VK purchase:",JSON.stringify(n)),n.order_id},vk_get_promo_gift:async function(e){return await l,await g("apps.promoHasActiveGift",{promo_id:e})},vk_use_promo_gift:async function(e){return await l,await g("apps.promoUseGift",{promo_id:e})},vk_invite_friends:async function(){await l,await i.sendPromise("VKWebAppShowInviteBox",{}).catch(function(e){return console.log(e)})},vk_request_permission:async function(e){await l;var t=b[e];if(!t)return!0;var n=void 0;try{n=await i.sendPromise("VKWebAppGetAuthToken",{app_id:Number(u["app-id"]),scope:t}),c.access_token=n.access_token}catch(e){return console.log("Permission request failed",e),!1}for(var r=n.scope.split(","),o=0;o<r.length;o++)if(w[r[o]]==e)return!0;return!1},vk_make_post:async function(e){var t=s.get_post(e);if(!t)throw new Error("unknown post id");await l;var n={message:t.text},r="";return t.attachments&&(r=t.attachments.join(",")),t.link&&(r.length>0?r+=","+t.link:r+=t.link),r.length>0&&(n.attachments=r),await i.sendPromise("VKWebAppShowWallPostBox",n)},vk_log_credentials:E});var O={prepare_ad:async function(){return{status:"success"}},show_ad:function(e,t){return"rewarded"===e?async function(e,t){var n=null;if(a.is_allowed("media"))try{if((n=await y(t))&&"success"===n.status)return n}catch(e){}try{if((n=await a.show_ad_fallbacks(e.on_opened))&&"success"===n.status)return n}catch(e){}return await a.wrap_ad_waterfall("html fake ad",async function(){return await new Promise(function(t,n){e.on_opened(),setTimeout(function(){t({status:"success",source:"html fake ad"})},1e4)})})}(t,"rewarded"):y(e)}};return{get_ads_provider:function(){return O}}};n(11),n(12),n(50);var r=n(10),o=n(35),i=n(389).default,a=n(78),s=n(79),u=void 0,c=void 0,l=r.MyPromise.future(),d=r.MyPromise.future(),f=r.MyPromise.future(),p=void 0,_=void 0,h=void 0,m=!1;var v=1e3;async function g(e,t){if(await l,p){var n={};for(var r in t)n[r]=t[r];n.test_mode=1,t=n}t.access_token=c.access_token,t.v="5.103";try{(function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=t.length,r=0;r<length;r++)e+=t.charAt(Math.floor(Math.random()*n))})();var o=i.sendPromise("VKWebAppCallAPIMethod",{method:e,params:t,request_id:(v++).toString()});return(await o).response}catch(e){return console.log("VK api error",e),await Promise.reject(e)}}function y(e){return"html5_android"===_?a.wrap_ad_waterfall("vk_android",function(){return async function(e){var t=void 0;if("preroll"===e)t="preloader";else if("interstitial"===e)t="interstitial";else{if("rewarded"!==e)throw new Error("invalid ad type");t="reward"}return(await i.sendPromise("VKWebAppShowNativeAds",{ad_format:t})).result?{status:"success",source:"vk_android_"+t}:{status:"failed",source:"vk_android_"+t,error:"no ad available"}}(e)}):"html5_ios"===_?a.wrap_ad_waterfall("vk_ios",function(){return async function(e){var t=void 0;if("preroll"===e)t="preloader";else if("interstitial"===e)t="interstitial";else{if("rewarded"!==e)throw new Error("invalid ad type");t="reward"}return(await i.sendPromise("VKWebAppShowNativeAds",{ad_format:t})).result?{status:"success",source:"vk_ios_"+t}:{status:"failed",source:"vk_ios_"+t,error:"no ad available"}}(e)}):a.wrap_ad_waterfall("vk_mobile",function(){return async function(e){var t=void 0;if("preroll"===e)t="preloader";else if("interstitial"===e)t="interstitial";else{if("rewarded"!==e)throw new Error("invalid ad type");t="reward"}return(await i.sendPromise("VKWebAppShowNativeAds",{ad_format:t})).result?{status:"success",source:"vk_web_"+t}:{status:"failed",source:"vk_web_"+t,error:"no ad available"}}(e)})}var w={friends:"user_friends"},b={user_friends:"friends"},k="friends",I={user_friends:!0};function E(){console.warn("VK credentials:",JSON.stringify(c))}},390:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=function(e){var t={prepare_ad:async function(){return{status:"success"}},show_ad:function(e){return"interstitial"===e||"preroll"===e?Promise.resolve({status:"failed",source:"none",error:"no ad source"}):new Promise(function(e,t){setTimeout(e,1e5)})}};return{get_ads_provider:function(){return t}}};n(391)},391:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=async function(e){var t,n=i.rewarded,s=i.interstitial;if("gamedistribution"===window.MA_CONFIG.embed)for(t in o.adRewardGDURL)n.push(o.adRewardGDURL[t]);else{var u=!1;try{var c=new URLSearchParams(window.location.search);if(c.has("adsperk")){for(t in o.adAdsperkURL){var l=o.adAdsperkURL[t];n.push(l),s.push(l)}u=!0}}catch(e){}if(!u){for(t in o.adRewardURL)n.push(o.adRewardURL[t]);for(t in o.adVideoURL)s.push(o.adVideoURL[t])}}try{await r.initialize(e)}catch(e){console.log("Can't load ads: %s",e)}return a};var r=n(50),o=n(12),i=(n(11),{rewarded:[],interstitial:[]}),a={show_ad:async function(e,t){await r.initialize();try{for(var n=0,o=0,a=i[e],s=0;s<a.length;s++){var u=a[s];o++;try{var c=await r.show_ad(u,function(){t.on_opened()},10);if("success"==c)return{status:"success",source:u};console.warn("ad with url "+u+" show failed: ",c)}catch(e){console.warn("ad with url "+u+" show failed: ",e),n++}}if(o==n&&n>0)throw new Error("all urls failed with errors");return{status:c}}catch(e){return console.warn("ad show failed with error: ",e),{status:"failed-blocked",error:e.toString()}}},prepare_ad:async function(e){return{status:"success"}}}},392:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=function(e){i=e,u=document.getElementById("fullscreen-loading"),c=document.getElementById("fullscreen-loading-timer"),(l=document.getElementById("fullscreen-loading-close")).onclick=f},t.show_ad=async function(e){if(!i)return{status:"failed",error:"internal error: no ad provider"};if(s)return{status:"failed",error:"internal error: another ad in progress"};r.show_shadow_overlay(!0);var t=await async function(e){var t=!0,n=!1;function r(e){""===e?c.style.display="none":(c.style.display="block",c.textContent=e)}function s(e){l.style.display=e?"block":"none"}var u=7,f="rewarded"===e?10:8;try{a||(a=await i),r(""),s(!1),setTimeout(function e(){if(!t)return;n||(p(!0),n=!0);u>0?u--:f--;var o=!0;0===u&&(0===f?(r(""),s(!0),o=!1):r(""+f));o&&setTimeout(e,1e3)},1e3),d=o.MyPromise.future();var _=await Promise.race([a.show_ad(e,{on_opened:function(){u=0}}),d]);if(!_||!_.status)throw new Error("invalid show_ad result: "+_);return _}catch(e){return console.warn("ad show failed with error: ",e),{status:"failed-blocked",error:e.toString()}}finally{t=!1,n&&(p(!1),n=!1)}}(e);if("failed-blocked"===t.status&&"rewarded"===e)try{await r.show_modal_popup("adblock")}catch(e){}return r.show_shadow_overlay(!1),t},t.prepare_ad=async function(e){if(!i)return{status:"failed",error:"internal error: no ad provider"};a||(a=await i);return a.prepare_ad(e)};var r=n(11),o=n(10),i=void 0,a=void 0,s=!1,u=void 0,c=void 0,l=void 0,d=void 0;function f(){d&&(d.resolve({status:"success",source:"html x fallback"}),d=null)}function p(e){u.style.display=e?"block":"none"}},395:function(e,t,n){"use strict";function r(e,t,n){var r=document.createElement(t);return r.classList.add(n),e.appendChild(r),r}Object.defineProperty(t,"__esModule",{value:!0}),t.show_reforged_promo=function(e,t){var n=r(document.getElementById("promo-wrapper"),"div","promo-block"),o=r(n,"div","promo-content"),i=r(o,"div","promo-proceed");r(i,"img","promo-content-img");var a=r(i,"div","promo-text-content"),s=r(i,"div","promo-button-play"),u=r(o,"div","promo-button-skip");a.textContent="Идем играть и забирать подарок в Скайдом Рефордж?",s.textContent="Играть!",u.textContent="Пропустить",i.addEventListener("click",function(){window.open(e,"_blank")}),u.addEventListener("click",function(){n.parentElement.removeChild(n),t()})}},397:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.expose=function(e){for(var t in e)l(t,e[t])},t.initialize_with_Module=function(){for(var e in o)jfl_register("jsapi_"+e,o[e])},t.show_flash=function(e){flash.style.visibility=e?"hidden":"visible"},t.invoke=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return s.apply(void 0,[e].concat(n))};var o={},i=[],a=1;function s(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return jfl_call.apply(void 0,["flashapi_"+e].concat(n))}function u(){var e=function(){if(0==i.length){var e=a;return a++,e}return i.pop()}();return s("allocate_callback",e),e}function c(e,t,n){try{s("invoke_callback",e,t,n)}catch(e){console.error("In Flash callback processing: %s",e)}finally{i.push(e)}}function l(e,t){var n=function(){var e=t.apply(null,arguments);if(!!e&&("object"===(void 0===e?"undefined":r(e))||"function"==typeof e)&&"function"==typeof e.then){var n=u();return e.then(function(e){c(n,!0,e)},function(e){c(n,!1,e)}),"promise"}return e};o[e]=n,"undefined"!=typeof jfl_register&&jfl_register("jsapi_"+e,n)}},398:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.initialize_app=function(e){q(e).then(function(){console.log("WASM init succeeded")},function(e){throw console.error("WASM init failed: "+e),e})};var o=n(10),i=n(60),a=n(11),s=n(12),u=n(48),c=n(399),l=n(150),d=n(49),f=(n(154),n(153)),p=n(79),_=n(151),h=n(108),m={phase:"init",percent:0,time_start:+new Date};window.perf=function(e){new Date;console.warn("perf",e)},window.alert=function(e){console.error("ALERT: "+e)};var v=!0,g=void 0;if("undefined"==typeof TextEncoder){var y=(new(n(408).TextEncoderLite)).encode;g={encode:function(e){var t=y(e);return new Uint8Array(t).buffer}}}else g=new TextEncoder;function w(){try{try{if(window.stackTrace)return window.stackTrace()}catch(e){}try{throw new Error("stack")}catch(e){return e.stack}}catch(e){return"<no stack available>"}}document.getElementById("wasm-wrapper");var b=document.getElementById("wasm-canvas"),k=null,I=!1,E=!1,S=document.createElement("style");S.type="text/css",S.innerHTML=".stage-text {  }",document.getElementsByTagName("head")[0].appendChild(S),b.addEventListener("touchmove",function(e){e.preventDefault()},!1),b.addEventListener("contextmenu",function(e){e.preventDefault()});var A=["text","password","search","email","number","date"];window.addEventListener("keydown",function(e){8!=e.keyCode||function(e){if(e.readOnly||e.disabled)return!1;var t=e.tagName.toLowerCase();if(e instanceof HTMLTextAreaElement)return!0;if("input"==t){var n=e.type.toLowerCase();if(A.includes(n))return!0}return!1}(e.target)||e.preventDefault()}),function(){var e={preInit:[function(){m.phase="wasm_preinit",perf("wasm preinit")}],preRun:[function(){m.phase="wasm_prerun",perf("wasm prerun")}],postRun:[function(){m.phase="wasm_postrun",perf("wasm postrun")}],print:function(e){console.log(e)},printErr:function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments).join(" ")),console.error(e)},onAbort:function(e){console.error("onAbort",e,w())},canvas:b,preinitializedWebGLContext:k,setStatus:function(e){},monitorRunDependencies:function(e){0==e&&(m.time_instance_end=+new Date)},locateFile:function(e){return e in MA_CONFIG.wasm_hash?("app.wasm"==e&&(m.time_instance_start=+new Date),"assets/wasm/"+MA_CONFIG.wasm_hash[e]):e}};window.Module=e,e.instantiateWasm=function(t,n){var r=Module.locateFile("app.wasm");function o(t){window.Module=e,n(t.instance,t.module)}function i(e){fetch(r,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+r+"'";return e.arrayBuffer()}).catch(function(){return getBinary()}).then(function(e){return WebAssembly.instantiate(e,t)}).then(e,function(e){err("failed to asynchronously prepare wasm: "+e),abort(e)})}return"function"==typeof WebAssembly.instantiateStreaming&&"function"==typeof fetch?WebAssembly.instantiateStreaming(fetch(r,{credentials:"same-origin"}),t).then(o,function(e){err("wasm streaming compile failed: "+e),err("falling back to ArrayBuffer instantiation"),i(o)}):i(o),{}}}();var O=document.getElementById("wasm-preloader"),x=(document.getElementById("wasm-loader"),document.getElementById("wasm-loader-wrapper")),C=document.getElementById("wasm-context-lost-wrapper"),P=document.getElementById("wasm-loader-progress-foreground"),N=document.getElementById("wasm-loader-progres-wrapper"),j=234352177,M=10,F=0,T=!0;var R=!1,L=void 0,U=5e3,D=[];async function q(e){if(m.phase="async_init",o.load_script("dynamic.js?volatile=1",!0).catch(function(e){console.error("Failed to load dynamic script",e)}),window.addEventListener("beforeunload",function(){v=!1}),i.get_texts(["page.loading.hint_1","page.loading.hint_2","page.loading.hint_3","page.loading.hint_4","page.loading.hint_5","page.loading.hint_6","page.loading.hint_7"]).then(function(e){var t=0;!function n(){T&&(document.getElementById("wasm-preloader-hint").innerHTML=e[t],++t>=e.length&&(t=2),setTimeout(n,5e3))}()}),"object"!==r(window.WebAssembly))return u.send("Web.FeatureMissing",{feature:"wasm"}),void setTimeout(function(){a.show_reload_modal("wasm")},0);if(function(){var e=[];function t(t){var n=t.statusMessage||"unknown";e.indexOf(n)<0&&e.push(n)}b.addEventListener("webglcontextcreationerror",t,!1);var n={alpha:!1,powerPreference:"high-performance",preserveDrawingBuffer:!1,stencil:!0,depth:!0,antialias:!1,failIfMajorPerformanceCaveat:!0},r=b.getContext("webgl",n)||b.getContext("experimental-webgl",n);if(r||(n.failIfMajorPerformanceCaveat=!1,(r=b.getContext("webgl",n)||b.getContext("experimental-webgl",n))&&(I=!0,u.send("Web.NoHardwareAccel",{errors:e.join(",")}),setTimeout(function(){"vk"===MA_CONFIG.embed?a.show_modal_popup("no_hardware_accel_vk"):window.is_firefox?a.show_modal_popup("no_hardware_accel_ff"):a.show_modal_popup("no_hardware_accel")},0))),b.removeEventListener("webglcontextcreationerror",t,!1),!r)return u.send("Web.FeatureMissing",{feature:"webgl",errors:e.join(",")}),setTimeout(function(){a.show_reload_modal("webgl")},0),!1;var o=r,i=function(){var e=o.getExtension("WEBGL_debug_renderer_info");return null!=e?{renderer:o.getParameter(e.UNMASKED_RENDERER_WEBGL),vendor:o.getParameter(e.UNMASKED_VENDOR_WEBGL)}:{renderer:o.getParameter(o.RENDERER),vendor:o.getParameter(o.VENDOR)}}();window.MA_EXTRA_INFO.gpu_renderer=i.renderer,window.MA_EXTRA_INFO.gpu_vendor=i.vendor;var s=void 0;return window.debug_lose_context=function(){s||(s=k.getExtension("WEBGL_lose_context")),s.loseContext()},window.debug_restore_context=function(){s.restoreContext()},k=r,Module.webgl=k,!0}()){m.phase="after_feature_test",L=e,n(409).expose(L),i.get_texts(["html.loading"]).then(function(e){document.getElementById("wasm-loader-title-text").innerHTML=e[0]});var t=!1,s=void 0,c=void 0;L.expose({on_preload_progress:function(e){R||(m.phase="after_preloader",m.time_loader_start=+new Date,R=!0,O.style.display="none",T=!1),F+=e;var t=Math.pow(F/j,2)*M,n=2*Math.atan(t)/Math.PI;P.style.setProperty("width",(100*n).toFixed(2)+"%"),m.time_loader_last_progress=+new Date,m.percent=100*n,l.on_loading_progress(n)},on_preload_finished:function(){m.phase="completed",l.on_loading_finish(),x.style.display="none",t=!0,s&&q(s),function(e,t){var n=+new Date,r={time_total:((n-m.time_start)/1e3).toFixed(2),phase:m.phase,percent:m.percent.toFixed(2)};if(m.time_loader_start&&(r.time_on_loader=((n-m.time_loader_start)/1e3).toFixed(2),r.time_to_loader=((m.time_loader_start-m.time_start)/1e3).toFixed(2)),m.time_loader_last_progress&&(r.time_since_last_progress=((n-m.time_loader_last_progress)/1e3).toFixed(2)),m.time_instance_end&&m.time_instance_start&&(r.time_wasm_start=((m.time_instance_start-m.time_loader_start)/1e3).toFixed(2),r.time_wasm_end=((m.time_instance_end-m.time_loader_start)/1e3).toFixed(2),r.time_wasm_instance=((m.time_instance_end-m.time_instance_start)/1e3).toFixed(2)),"Loading.Complete"===e){var o=window.MA_CONFIG.extra_loading_args;if(o)for(var i in o)r[i]=o[i];r.hardware_accel=!I}t?u.send_beacon(e,r):u.send(e,r)}("Loading.Complete",!1)},get_collected_log:function(){return D.join("\n")},get_extra_info:function(){return window.MA_EXTRA_INFO},report_context_state:function(e){t?q(e):s=e}}),window.lua=function(e){L.invoke("cmd",e)};var g={embed:MA_CONFIG.embed,skin:MA_CONFIG.skin,resid:MA_CONFIG.resources_id,assets_url:MA_CONFIG.assets_url,fb_app:MA_CONFIG.fb_app,vk_app:p.get_app(),ok_app:_.get_app(),my_app:MA_CONFIG.my_app,y8_app:f.get_app(),yandex_app:h.get_app(),referrer:MA_CONFIG.referrer,lc:i.get_locale()},y=new URLSearchParams(window.location.search);if("gamedistribution"===MA_CONFIG.embed)y.get("xdm_c")&&(g.gd_inapp=!0);if("vk"===MA_CONFIG.embed){var w=y.get("platform");w&&(g.vk_platform=w)}g.need_ios14_fix=!!MA_CONFIG.needs_ios_fix,g.use_external_image_loader=!!MA_CONFIG.use_external_image_loader,Module.arguments=[JSON.stringify(g)],Module.onCanvasResize=function(e,t,n){var r="scale("+1/n+", "+1/n+")";S.innerHTML=".stage-text-container {-ms-transform: "+r+"; -webkit-transform:"+r+";transform: "+r+";}"},Module.onContextFailed=function(){v=!1,u.send("Web.FeatureMissing",{feature:"webgl"}),a.show_reload_modal("webgl")};var A=!1;if("my"!==MA_CONFIG.embed&&"ok"!==MA_CONFIG.embed&&"vk"!==MA_CONFIG.embed||(A=!0),d.isPersistent()||A||(a.show_modal_popup("nolocalstorage"),u.send("Test.NoLocalStorage",{})),m.phase="pre_wasm_fetch",l.on_loading_start(),perf("before wasm js loaded"),await o.load_script("assets/wasm/"+MA_CONFIG.wasm_hash["app.js"],!1),__ATMAIN__.unshift(function(){m.phase="wasm_runtime_ready",E=!0}),m.phase="after_wasm_fetch",perf("after wasm js loaded"),m.phase="after_wasm_link",L.initialize_with_Module(),m.phase="after_async_init",window.MA_RUNTIME_CONFIG){var U=window.MA_RUNTIME_CONFIG.maintenance;if(U)+new Date/1e3<=parseInt(U)+10800&&a.show_modal_popup({header:"modal.maintenance.title",text:{id:"modal.maintenance.text",time:new Date(1e3*U).toLocaleString()},button:"modal.maintenance.button"})}}function q(e){c!=e&&(x.style.display="none",C.style.display="none","lost"==e?(C.style.display="block",i.get_texts(["web.webg_context_lost"]).then(function(e){document.getElementById("wasm-context-lost-text").innerHTML=e[0]})):"restoring"==e&&(N.style.display="none",x.style.display="block"))}}function G(e){return o.debug_format(e)}function z(e){var t=console[e].bind(console);console[e]=function(){if(d.getItem("developer")||s.debug){var n=Array.prototype.slice.call(arguments);n.unshift("["+((+new Date-window.performance.timing.navigationStart)/1e3).toFixed(3)+"]"),t.apply(console,n)}!function(e,t){var n=(new Date).toISOString()+" "+e+": "+t.map(G).join(" ");D.push(n),D.length>=2*U&&(D=D.slice(D.length-U))}(e,Array.from(arguments))}}function B(e,t){var n=D.join("\n"),r=g.encode(n),i=c.deflate(r),a={api:"Debug:0.0.1",session_id:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}(),requests:[{id:"1",method:"error",args:{error:e,log:o.base64encode(i)}}]};if(t&&navigator&&navigator.sendBeacon)navigator.sendBeacon(s.debugURL,JSON.stringify(a));else{var u=new XMLHttpRequest;u.open("POST",s.debugURL,!0),u.setRequestHeader("Content-Type","application/json;charset=UTF-8"),u.responseType="text",u.send(JSON.stringify(a))}}z("log"),z("debug"),z("warn"),z("info"),z("error"),console.log("Browser UA:",navigator.userAgent);var V=!0;function K(e,t){console.error(e,w());try{E&&"undefined"!=typeof jfl_uncaught_error?jfl_uncaught_error(e):console.error("extra information is not available")}catch(e){console.error("unable to get extra information",e)}v&&setTimeout(function(){for(var n=["out of memory","could not allocate memory","Out of executable memory"],r=!1,o=0;o<n.length;o++)e.indexOf(n[o])>=0&&(r=!0);t?function(e,t){V&&(B(e,t),V=!1),u.send("Error.Silenced",{message:e})}(e):r?a.show_reload_modal("oom"):(B(e),a.show_reload_modal("error"))},50),t||(v=!1)}var W=["SecurityError","Script error","Zugriff verweigert","Accès refusé","Přístup byl odepřen","Adgang nægtet","Accesso negato","Odmowa dostępu","Access is denied","Object expected","Acceso denegado","アクセスが拒否されました","InvalidStateError: An attempt was made to use an object that is not, or is no longer, usable","unmuteAudio","muteAudio","NotAllowedError","Sdk is not init","The play() request was interrupted because the media was removed from the document"];function J(){if("external"===MA_CONFIG.embed&&"pecpoc.com"===MA_CONFIG.partner&&navigator.userAgent.toLowerCase().indexOf("android")>-1)try{var e=document.documentElement,t=null;e.requestFullscreen?t=e.requestFullscreen():e.mozRequestFullScreen?t=e.mozRequestFullScreen():e.webkitRequestFullscreen?t=e.webkitRequestFullscreen():e.msRequestFullscreen&&(t=e.msRequestFullscreen()),t&&t.catch(function(){})}catch(e){}}window.addEventListener("error",function(e){var t="<unknown message>";e.message&&(t=e.message);for(var n=0;n<W.length;n++)if(t.indexOf(W[n])>=0)return;return e.error?K("Runtime Error (error) occured at "+String(e.fileName)+"("+String(e.lineNumber)+":"+String(e.columnNumber)+"):\n"+String(e.message)+"\n"+(e.stack||"no stack")):e.message&&K("Runtime Error (message) occured at "+String(e.filename)+"("+String(e.lineno)+":"+String(e.colno)+"):\n"+String(e.message)+"\n"+(e.stack||"no stack")),e.preventDefault(),!1},!0),window.addEventListener("unhandledrejection",function(e){var t=""+e.reason,n=!1;if(!(t.indexOf("Failed to fetch")>=0)&&"gamedistribution"!==MA_CONFIG.embed&&"vk"!==MA_CONFIG.embed){"yandex"===MA_CONFIG.embed&&(n=!0);for(var r=0;r<W.length;r++)if(t.indexOf(W[r])>=0)return;K("Unhandled Rejection occured: "+o.debug_format(e.reason),n),event.preventDefault()}}),window.addEventListener("beforeunload",function(){return E&&L&&L.invoke("on_unload"),window.location.search.indexOf("pecpoc-debug")>=0&&B("debug log",!0),m.phase,null}),document.addEventListener("click",J),document.addEventListener("touchend",J)},409:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.expose=function(e){e.expose({proxy_load:async function(e){var t=await r.load_binary(e);return r.base64encode(t)}})};var r=n(10)},48:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=function(e,t){var n=e;r.initialize(t.amplitude),o.initialize(t.posthog),n.expose({analytics_send:function(e,t){s(e,t)},analytics_update_user:function(e,t){var n={};n[e]=t,a(n)},analytics_reset_user:function(e,t){i(e),a(t)}})},t.reset_user=i,t.update_user_params=a,t.send_beacon=function(e,t){u("beacon",e,t)},t.send=s;var r=n(371),o=n(149);function i(e){r.reset_user(e),o.reset_user(e)}function a(e){r.update_user_params(e),o.update_user_params(e)}function s(e,t){u("sync",e,t)}function u(e,t,n){r.send_event(e,t,n),o.send_event(e,t,n)}},49:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setItem=i,t.getItem=a,t.removeItem=s,t.isAvailable=u,t.isPersistent=c;var r=null,o={};function i(e,t){if(u())try{return window.localStorage.setItem(e,t)}catch(e){return null}else o[e]=""+t}function a(e){if(!u())return o[e];try{return window.localStorage.getItem(e)}catch(e){return null}}function s(e){if(u())return window.localStorage.removeItem(e);delete o[e]}function u(){if(null===r)try{var e=window.localStorage;e.setItem("check","1"),"1"===e.getItem("check")?(e.removeItem("check"),r=!0):r=!1}catch(e){r=!1}return r}function c(){return u()}window["pecpoc.com/storage"]={isAvailable:u,isPersistent:c,removeItem:s,getItem:a,setItem:i}},50:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=function(e){return function(e){i&&!a||(a=!1,e||(e=function(){return s.load_script(u,!0)}),(i=e().then(function(){r=document.getElementById("fullscreen-video"),o=document.getElementById("fullscreen-wrapper"),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED)})).catch(function(e){console.log("Failed to load IMASDK: %s",e),a=!0}));return i}(e)},t.preload=function(e){return i.then(function(){return _(e)}).catch(function(){})},t.prepare_ad=function(e,t){return s.MyPromise.with_timeout(i.then(function(){return _(e,!0)}),t,function(){return"timeout"}).then(function(e){return"timeout"===e?"failed":"success"})},t.show_ad=function(e,t,n){return s.MyPromise.with_timeout(i.then(function(){return function(e){return _(e,!0)}(e)}),n,function(){return"timeout"}).then(function(e){return"timeout"===e?"failed":e.show(t)})};var r,o,i,a,s=n(10),u="https://imasdk.googleapis.com/js/sdkloader/ima3.js",c=!1;function l(){return window.innerWidth||(document.documentElement?document.documentElement.clientWidth:0)||(document.body?document.body.clientWidth:0)}function d(){return window.innerHeight||(document.documentElement?document.documentElement.clientHeight:0)||(document.body?document.body.clientHeight:0)}function f(e){return new Promise(function(t,n){var i=document.createElement("div");i.style.position="absolute",i.style.top=i.style.left="0px",i.style.width=i.style.height="100%",i.style.overflow="hidden",i.style.display="none",o.appendChild(i);var a=new google.ima.AdDisplayContainer(i,r),s=new google.ima.AdsLoader(a);function u(){s.removeEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,_),s.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,p)}s.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,_),s.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,p);var c=new google.ima.AdsRequest;function f(){s.contentComplete(),i.style.display="none",o.style.display="none",o.removeChild(i)}function p(t){u(),console.log("Preparing ad with url "+e+" failed: "+t.getError().toString()),f(),n(t.getError())}function _(n){u();var s=new google.ima.AdsRenderingSettings;s.restoreCustomPlaybackStateOnAdBreakComplete=!0;var c=n.getAdsManager(r,s);console.log("ad with url "+e+" successfully prepared!");var p=null,_=[];var h={};h.show=function(e){return p||(p=new Promise(function(t,n){var s=!1;function u(){s||(s=!0,c.removeEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,h),c.removeEventListener(google.ima.AdEvent.Type.CLICK,h),c.removeEventListener(google.ima.AdEvent.Type.COMPLETE,h),c.removeEventListener(google.ima.AdEvent.Type.SKIPPED,h),c.removeEventListener(google.ima.AdEvent.Type.USER_CLOSE,h),c.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,h),c.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,p),c.destroy(),window.removeEventListener("resize",m),f(),function(){for(var e in _)_[e]()}())}function p(e){u(),n(e.getError())}function h(){u(),t("success")}function m(){c.resize(l(),d(),google.ima.ViewMode.NORMAL)}c.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,h),c.addEventListener(google.ima.AdEvent.Type.CLICK,h),c.addEventListener(google.ima.AdEvent.Type.COMPLETE,h),c.addEventListener(google.ima.AdEvent.Type.SKIPPED,h),c.addEventListener(google.ima.AdEvent.Type.USER_CLOSE,h),c.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,h),c.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,p),window.addEventListener("resize",m);try{r.load(),a.initialize(),i.style.display="block",o.style.display="block",c.init(l(),d(),google.ima.ViewMode.NORMAL),c.start(),e()}catch(e){u(),n(e)}})),p},h.register_on_complete=function(e){_.push(e)},t(h)}c.adTagUrl=e,c.linearAdSlotWidth=c.nonLinearAdSlotWidth=l(),c.linearAdSlotHeight=c.nonLinearAdSlotHeight=d(),c.forceNonLinearFullSlot=!0,s.requestAds(c)})}var p={};function _(e,t){if(e in p)return t&&p[e].purge?(p[e].purge(),_(e)):p[e].promise;var n={},r=f(e);function o(){n.purge=null,p[e]==n&&(delete p[e],c&&_(e).catch(function(){}))}return n.promise=r,r.then(function(e){e.register_on_complete(o)},function(e){n.purge=o,setTimeout(o,1e3*(10+20*Math.random()))}),p[e]=n,r}},60:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=function(e){return s.resolve(e),c(o)},t.set_locale=l,t.choose_locale=function(e){if("vk"===MA_CONFIG.embed||"ok"===MA_CONFIG.embed||"my"===MA_CONFIG.embed)return void l("ru-RU");for(var t=!1,n=null,r=0;r<e.length;r++){var o=e[r].replace(/_/g,"-").toLowerCase(),s=null;for(var u in a)o.substr(0,u.length)===u&&(!s||s.length<u.length)&&(s=u);if(s){var c=a[s],d=i.indexOf(c)>=0;(!n||!t&&d)&&(n=c,t=d)}}n&&l(n)},t.get_locale=function(){return o},t.get_texts=function(e){return c(o).then(function(t){for(var n=[],r=0;r<e.length;r++){var i=e[r];if(i in t){var a=t[i];o in a?n.push(a[o]):n.push(a["en-US"])}else n.push("%"+i+"%")}return n})};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(369));var o="en-US",i=["en-US","de-DE","ru-RU"],a={en:"en-US",de:"de-DE",ru:"ru-RU",pt:"pt-BR",fr:"fr-FR",es:"es-ES",nl:"nl-NL",pl:"pl-PL",tr:"tr-TR",ar:"ar-SA",hi:"hi-IN",fil:"fil-PH",da:"da-DK",sv:"sv-SE",it:"it-IT",nb:"nb-NO",fi:"fi-FI",el:"el-GR",id:"id-ID",ja:"ja-JP",zh:"zh-CN",ko:"ko-KR",bg:"bg-BG",ca:"ca-ES",hr:"hr-HR",cs:"cs-CZ",iw:"iw-IL",hu:"hu-HU",ms:"ms-MY",sk:"sk-SK",ro:"ro-RO",vi:"vi-VN",ka:"ka-GE",uk:"uk-UA"},s=n(10).MyPromise.future(),u={};function c(e){return e in u||(u[e]=s.then(function(t){return new Promise(function(n,o){console.log("Loading locale "+e+" from url "+t[e]);var i=new XMLHttpRequest;i.open("GET",t[e],!0),i.responseType="text",i.addEventListener("load",function(e){var t=i.response,o={},a=r.default.toObjects(t);for(var s in a){var u=a[s];u.ID&&(o[u.ID]=u)}n(o)}),i.addEventListener("error",function(t){n({}),console.error("translation","Failed to load "+e,t)}),i.send()})})),u[e]}function l(e){o=e,c(e)}},77:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.connect=function(e,t,n,o){var i=(o=o||{}).allowed_origins,a=null,s=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)});function u(e,r,o){if(a){if(a.remote_uuid===e)return;a.close()}var i={local_uuid:s,remote_uuid:e,origin:"*",incoming_requests:{},outgoing_requests:{},free_ids:[],next_id:1,connected:!0};a=i,console.log("IRPC["+i.local_uuid+"]: Connection with remote target",i.remote_uuid),i.close=function(){this.connected=!1;var e=this.incoming_requests,n=[];for(var o in e)n.push(o),t.postMessage({"irpc::type":"response",source_uuid:this.local_uuid,target_uuid:this.remote_uuid,request_id:o,error:""},this.origin);for(var s in n)delete e[n[s]];var u=this.outgoing_requests,c=[];for(var l in u)c.push(l),u[l].reject("disconnected");for(var d in c)delete u[c[d]];console.log("IRPC["+i.local_uuid+"]: Closed connection with remote target",i.remote_uuid),t.postMessage({"irpc::type":"disconnect",source_uuid:this.local_uuid,target_uuid:this.remote_uuid},r),this===a&&(a=null)},i.matches=function(e){return e.source_uuid==this.remote_uuid&&e.target_uuid==this.local_uuid},i.process_response=function(e){var t=e.request_id,n=this.outgoing_requests[t];n?(delete this.outgoing_requests[t],this.free_ids.push(t),"error"in e?n.reject(JSON.parse(e.error)):"value"in e?n.resolve(JSON.parse(e.value)):console.error("malformed response",e)):console.error("no outgoing request for response",e)},i.invoke=function(e,n){var r=this;if(!this.connected)return Promise.reject("disconnected");var o=void 0;o=this.free_ids.length>0?this.free_ids.pop():this.next_id++;var i=this;return new Promise(function(a,s){if(!i.connected)return Promise.reject("disconnected");var u={resolve:a,reject:s};r.outgoing_requests[o]=u,t.postMessage({"irpc::type":"invoke",source_uuid:i.local_uuid,target_uuid:i.remote_uuid,request_id:o,method:e,args:n},i.origin)})},i.rpc_invoke=function(e){var r=this,o=e.request_id,i=e.method,a=e.args,s=this.incoming_requests,u=new Promise(function(e,t){return e(n(i,a))});s[o]=u,u.then(function(e){o in s&&(delete s[o],t.postMessage({"irpc::type":"response",source_uuid:r.local_uuid,target_uuid:r.remote_uuid,request_id:o,value:JSON.stringify(void 0===e?null:e)},r.origin))},function(e){o in s&&(delete s[o],t.postMessage({"irpc::type":"response",source_uuid:r.local_uuid,target_uuid:r.remote_uuid,request_id:o,error:JSON.stringify(void 0===e?null:e)},r.origin))})},o&&t.postMessage({"irpc::type":"connected_ack",source_uuid:i.local_uuid,target_uuid:i.remote_uuid},r),n("irpc::connected",{connection:{invoke:i.invoke.bind(i)}})}function c(){t.postMessage({"irpc::type":"connect",source_uuid:s},"*")}return e.addEventListener("message",function(e){var n=e.source,o=e.origin;if(n==t&&!(i&&i.indexOf(e.origin)<0)){var l=e.data;if("object"===(void 0===l?"undefined":r(l))&&"irpc::type"in l)switch(l["irpc::type"]){case"invoke":a&&a.matches(l)?a.rpc_invoke(l):t.postMessage({"irpc::type":"response",source_uuid:l.remote_uuid,target_uuid:l.source_uuid,request_id:l.request_id,error:"not connected"},o);break;case"response":a&&a.matches(l)&&a.process_response(l);break;case"connect":u(l.source_uuid,"null"===o?null:o,!0);break;case"disconnect":a&&a.matches(l)&&a.close(),a||c();break;case"connected_ack":l.target_uuid===s?u(l.source_uuid,"null"===o?null:o,!1):c()}}}),c(),{}}},78:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.is_allowed=d,t.allow=f,t.init=function(e){e.expose({vk_set_allowed:f});new URLSearchParams(window.location.search).get("platform");l.push({source:"vk_cb_vk",handler:c,test:function(){return d("vk")}})},t.wrap_ad_waterfall=p,t.show_ad_fallbacks=async function(e){!function(e){for(var t=e.length,n=1;n<t;n++){var r=0|Math.random()*n;if(r>n&&(r=n),n!=r){var o=e[n];e[n]=e[r],e[r]=o}}}(l);for(var t=async function(t){var n=!1;if(l[t].test&&!l[t].test())return"continue";var r=l[t].source;try{n=await p(r,function(){return l[t].handler(e)})}catch(e){console.warn("Ad handler "+r+" failed with error",e)}return n?{v:{status:"success",source:r}}:void 0},n=0;n<l.length;n++){var o=await t(n);switch(o){case"continue":continue;default:if("object"===(void 0===o?"undefined":r(o)))return o.v}}return{status:"failed",source:"vk_fallback_ads",reason:"no custom block succeeded"}};var o=n(152),i=n(12),a=n(48),s=n(49),u=!1;t.posts={main:{dc_win:{text:"😃 Ихаааа! Корона Турнира Моя!!! Присоединяйся! 🎮🎯🕹️",link:"http://vk.com/skydom#wallpublic",attachments:["photo-195221625_457239030"]}},reforged:{dc_win:{text:"😃 Ихаааа! Корона Турнира Моя!!! Присоединяйся! 🎮🎯🕹️",link:"https://vk.com/skydomreforged#wallpublic",attachments:["photo-195221625_457239030"]}}};function c(e){return o.show_vk_ad(i.vk_custom_blocks.vk,e)}var l=[];function d(e){return"off"!==s.getItem("pecpoc.com/vk_ads/"+e)}function f(e,t){s.setItem("pecpoc.com/vk_ads/"+e,t?"on":"off")}async function p(e,t){var n=void 0,o=void 0;try{var i=await t();return"object"===(void 0===i?"undefined":r(i))?(n=i.status,e=i.source,o=i.error):n=i?"success":"failed",i}catch(e){throw n="error",o=""+e,e}finally{u&&a.send("Test.VKAdWaterfall",{source:e,result:n,reason:o})}}},79:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get_app=s,t.get_post=function(e){return s(),o.posts[a][e]},t.get_reforged_promo_link=function(){var e=new URLSearchParams(window.location.search),t=e.get("platform"),n=e.get("ref_notification_type"),r=e.get("ref_notification_id");if("broadcast"==n&&r==u)return"web"==t?"https://vk.com/games/skydomreforged":"https://m.vk.com/games/skydomreforged";return null};n(11);var r=n(12),o=(n(50),n(10),n(35),n(78)),i=null,a=null;function s(){i||("reforged"==window.MA_CONFIG.skin?(console.log("Selected VK application reforged"),i=r.vk["iframe-reforged"],a="reforged"):(i=r.vk.iframe,a="main"));return i}var u="193"}});
//# sourceMappingURL=app.ca3750e0085f11e9a514.js.map